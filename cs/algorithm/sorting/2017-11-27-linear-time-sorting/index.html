<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>
  
     线性时间排序 | 
    风格与布局
  
</title><meta name="description" content="Android移动应用开发"><meta name="author" content="jastrelax">

<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/favicon-32x32.png " sizes="32x32" type="image/png">
<link rel="icon" href="/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0c344b">
<link rel="icon" href="/favicon.ico">




    
        
            <link rel="stylesheet" href="/dist/main.37ab3f61b95417873748.min.css">
        
    




<link rel="canonical" href="https://www.androidpi.com/cs/algorithm/sorting/2017-11-27-linear-time-sorting/"><meta property="og:title" content="线性时间排序" />
<meta property="og:description" content="排序算法下界 对任意的比较排序算法都可以抽象为一棵决策树，它是一棵完全二叉树，可以表示在给定输入规模下对所有元素的比较操作，其中，控制、数据移" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.androidpi.com/cs/algorithm/sorting/2017-11-27-linear-time-sorting/" />
<meta property="article:published_time" content="2017-11-27T15:23:32+08:00" />
<meta property="article:modified_time" content="2017-11-27T15:23:32+08:00" />
<meta itemprop="name" content="线性时间排序">
<meta itemprop="description" content="排序算法下界 对任意的比较排序算法都可以抽象为一棵决策树，它是一棵完全二叉树，可以表示在给定输入规模下对所有元素的比较操作，其中，控制、数据移">
<meta itemprop="datePublished" content="2017-11-27T15:23:32&#43;08:00" />
<meta itemprop="dateModified" content="2017-11-27T15:23:32&#43;08:00" />
<meta itemprop="wordCount" content="1513">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="线性时间排序"/>
<meta name="twitter:description" content="排序算法下界 对任意的比较排序算法都可以抽象为一棵决策树，它是一棵完全二叉树，可以表示在给定输入规模下对所有元素的比较操作，其中，控制、数据移"/>

</head>
<body>
    
<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top shadow-sm" id="navbar-main-menu">
    <div class="container">
        <a class="navbar-brand font-weight-bold" href="https://www.androidpi.com/">风格与布局</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="main-menu">
            <ul class="navbar-nav ml-auto">
                
                    <li class="nav-item"><a class="nav-link" href="/android/">Android</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/blockchain/">Blockchain</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/book/">Books</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/cs/">CS</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/ee/">EE</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/java/">Java</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/puzzles/">Puzzles</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/web/">Web</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/backend/">后端</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/engineering/">工程与架构</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/dev/">开发</a></li>
                
            
            </ul>
        </div>
    </div>
</nav>


    
<main class="content-page container pt-7 pb-5">
    <div class="row">
        <div class="col">
            <article>
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <h2 class="mb-3">线性时间排序</h2>

                        <div class="content">
                            <h2 id="排序算法下界">排序算法下界</h2>
<p>对任意的比较排序算法都可以抽象为一棵<strong>决策树</strong>，它是一棵完全二叉树，可以表示在给定输入规模下对所有元素的比较操作，其中，控制、数据移动等其它操作都被忽略。对于一个正确的排序算法，它都能够生成输入的每一种排列，所以对一个正确的比较排序算法来说，n个元素的$n!$种可能的排列都应该出现在决策树的叶结点上，对于一个给定的输入，其排序结果必然就是这所有可能中的某一个。</p>
<p>根据这个比较排序的决策树模型，从根结点到一个可达的叶结点之间的最长简单路径的长度，表示的是对应排序算法中最坏情况下的比较次数，它等于决策树的高度。因此，当决策树中的每种排列都是以可达的叶结点形式出现时，该决策树高度的下界也就是比较排序算法运行时间的下界。</p>
<h3 id="最坏情况的下界">最坏情况的下界</h3>
<p>考虑一棵高度为h，具有l个可达叶结点的决策树，它对应一个对n个元素所做的比较排序，输入的$n!$种可能的排序都是叶结点，并且一棵高度为h的二叉树中，叶结点的数量不多于$2^h$，因此有：
$$
n! \leq l \leq 2^h
$$
得到
$$
h \geq \lg (n!) = \Omega (n\lg n)
$$</p>
<h2 id="计数排序">计数排序</h2>
<h3 id="适用场景">适用场景</h3>
<p>n个输入元素是0到k区间的整数，或者元素可以通过转换函数，在不丢失大小信息的情况下，唯一地映射到0到k区间某一个整数。</p>
<h3 id="基本思想">基本思想</h3>
<p>对每一个输入元素x确定小于x的元素个数，利用这一信息可以直接将x放到它在输出数组中的位置上。</p>
<h3 id="实现">实现</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">counting_sort_integer</span>(A, B, k):
    C <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)]
    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> A:
        C[x] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
            C[i] <span style="color:#f92672">+=</span> C[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> A:
        <span style="color:#75715e"># index start with 0, so minus 1</span>
        B[C[x]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> x
        C[x] <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    A <span style="color:#f92672">=</span> [<span style="color:#ae81ff">123</span>, <span style="color:#ae81ff">21</span>, <span style="color:#ae81ff">14321</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">120</span>, <span style="color:#ae81ff">98</span>, <span style="color:#ae81ff">1000</span>, <span style="color:#ae81ff">1024</span>, <span style="color:#ae81ff">123</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">123</span>, <span style="color:#ae81ff">24</span>, <span style="color:#ae81ff">123</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">12</span>]
    B <span style="color:#f92672">=</span> [None] <span style="color:#f92672">*</span> len(A)
    counting_sort_integer(A, B, <span style="color:#ae81ff">14321</span>)
    <span style="color:#66d9ef">print</span> B
</code></pre></div><h2 id="基数排序">基数排序</h2>
<h3 id="适用场景-1">适用场景</h3>
<p>对具有多关键字域的记录或某一基数表示的数（二进制位表示，10进制数，16进制数，字符串等）进行排序，其共同的特点是每个元素有d位，每一位有一个固定的取值区间，因此可以利用到计数排序的方法。</p>
<h3 id="基本思想-1">基本思想</h3>
<p>对于有n个d位元素的输入，从每个元素的最低有效位开始，到最高有效位，使用一个稳定的排序算法对n个元素进行排序。一个稳定的排序算法指对相等元素的排序不改变它们已有的顺序。</p>
<h3 id="稳定的排序">稳定的排序</h3>
<p>计数排序可以很容易做到稳定排序，只需在使用计数序号将输入元素放入输出元素时，先放入输入序列中靠后的元素即可，因此上面的计数排序的稳定版本为：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">counting_sort_integer</span>(A, B, k):
    C <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)]
    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> A:
        C[x] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
            C[i] <span style="color:#f92672">+=</span> C[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> xrange(len(A)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>):
        x <span style="color:#f92672">=</span> A[j]
        <span style="color:#75715e"># index start with 0, so minus 1</span>
        B[C[x]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> x
        C[x] <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</code></pre></div><p>其它排序算法也可以设计为稳定的排序，但可能需要额外的的时间和空间复杂度，这也是算法导论中的一道练习题。</p>
<h3 id="实现-1">实现</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">counting_sort_char</span>(index, A, B, k):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    i: the digit index for comparation
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    C <span style="color:#f92672">=</span> [<span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)]
    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> A:
        <span style="color:#75715e"># digit index exceed digit length</span>
        <span style="color:#66d9ef">if</span> index <span style="color:#f92672">&gt;=</span> len(x):
            C[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
        <span style="color:#66d9ef">else</span>:
            C[ord(x[index])] <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>):
        <span style="color:#66d9ef">if</span> i <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
            C[i] <span style="color:#f92672">+=</span> C[i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
    <span style="color:#75715e"># Now C[i] contains the number of element smaller or equal to i,</span>
    <span style="color:#75715e"># which i is &#34;index&#34;th digit of element of A</span>
    <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> xrange(len(A)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
        x <span style="color:#f92672">=</span> A[j]
        i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
        <span style="color:#66d9ef">if</span> index <span style="color:#f92672">&lt;</span> len(x):
            i <span style="color:#f92672">=</span> ord(x[index])
        <span style="color:#75715e"># index start with 0, so minus 1</span>
        B[C[i]<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> x
        C[i] <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">radix_sort_string</span>(A, d):
    size <span style="color:#f92672">=</span> len(A)
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, d):
        B <span style="color:#f92672">=</span> [None] <span style="color:#f92672">*</span> size
        counting_sort_char(i, A, B, <span style="color:#ae81ff">255</span>)
        A <span style="color:#f92672">=</span> B
        <span style="color:#66d9ef">print</span> A
    <span style="color:#66d9ef">return</span> A

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    A <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;bc&#34;</span>, <span style="color:#e6db74">&#34;def&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>, <span style="color:#e6db74">&#34;hello world&#34;</span>, <span style="color:#e6db74">&#34;asdasdf&#34;</span>, <span style="color:#e6db74">&#34;code&#34;</span>, <span style="color:#e6db74">&#34;python&#34;</span>, <span style="color:#e6db74">&#34;081324asdf&#34;</span>, <span style="color:#e6db74">&#34;1&#34;</span>, <span style="color:#e6db74">&#34;shark-&#34;</span>]
    d <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#66d9ef">for</span> e <span style="color:#f92672">in</span> A:
        length <span style="color:#f92672">=</span> len(e)
        <span style="color:#66d9ef">if</span> length <span style="color:#f92672">&gt;</span> d:
            d <span style="color:#f92672">=</span> length
    B <span style="color:#f92672">=</span> radix_sort_string(A, d)
    <span style="color:#66d9ef">print</span> B
</code></pre></div><h2 id="桶排序">桶排序</h2>
<h3 id="适用场景-2">适用场景</h3>
<p>输入数据服从均匀分布，它由一个随机过程产生，该过程将元素均匀、独立地分布在[0, 1)区间上。</p>
<h3 id="基本思想-2">基本思想</h3>
<p>输入序列的大小为n，桶排序将[0, 1)区间划分为n个相同大小的子区间，也称这些子区间为桶。然后将n个输入数分别放到各个桶中。因为输入数据是均匀分布的，一般不会出现很多元素落入同一个桶中的情况。将所有元素都放入相应的桶中后，对每个桶中的元素进行排序，然后按顺序遍历所有桶中的元素即可。</p>
<h3 id="实现-2">实现</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">swap</span>(A, i, j):
    temp <span style="color:#f92672">=</span> A[i]
    A[i] <span style="color:#f92672">=</span> A[j]
    A[j] <span style="color:#f92672">=</span> temp

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bubble_sort</span>(A):
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(len(A) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
        max <span style="color:#f92672">=</span> A[i]
        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> xrange(i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>):
            <span style="color:#66d9ef">if</span> A[j] <span style="color:#f92672">&gt;</span> max:
                max <span style="color:#f92672">=</span> A[j]
                swap(A, i, j)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">bucket_sort</span>(A):
    n <span style="color:#f92672">=</span> len(A)
    min_v <span style="color:#f92672">=</span> min(A)
    max_v <span style="color:#f92672">=</span> max(A)
    range <span style="color:#f92672">=</span> max_v <span style="color:#f92672">-</span> min_v
    range <span style="color:#f92672">+=</span> range <span style="color:#f92672">/</span> n
    bucket <span style="color:#f92672">=</span> [[] <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, n)]
    <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> A:
        i <span style="color:#f92672">=</span> int((x <span style="color:#f92672">-</span> min_v) <span style="color:#f92672">/</span> range <span style="color:#f92672">*</span> n)
        bucket[i]<span style="color:#f92672">.</span>append(x)
    current <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> xrange(<span style="color:#ae81ff">0</span>, n):
        bubble_sort(bucket[i])
        <span style="color:#66d9ef">for</span> x <span style="color:#f92672">in</span> bucket[i]:
            A[current] <span style="color:#f92672">=</span> x
            current <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    A <span style="color:#f92672">=</span> [<span style="color:#ae81ff">57</span>, <span style="color:#ae81ff">35</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">100.2</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">12</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">20</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">23.123</span>, <span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">12</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">20</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">23.123</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">23</span>, <span style="color:#ae81ff">214</span>, <span style="color:#ae81ff">123</span>, <span style="color:#ae81ff">135</span>]
    bucket_sort(A)
    <span style="color:#66d9ef">print</span> A
</code></pre></div>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </div>
</main>


    <footer class="footer text-center bg-dark py-6">
    <div class="container">
        <div class="row">
            <div class="col">
                <ul class="list-inline">
                    
                </ul>

                <p class="text-muted">
                    
                        Copyright &copy; 风格与布局 2020
                    
                </p>

                <p class="text-muted">
                Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with <a href="https://github.com/puresyntax71/hugo-theme-chunky-poster" target="_blank">Chunky Poster</a>.
                </p>

                <p class="text-muted">
                    <a href="http://beian.miit.gov.cn" target="_blank">蜀ICP备18005659号-1</a>
                </p>
            
            </div>
        </div>
    </div>
</footer>

    
    
        
            <script src="/dist/main.d608eadfe5ac0688902e.min.js"></script>
        
    








    
</body>
</html>
