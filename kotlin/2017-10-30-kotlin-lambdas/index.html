<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" >
        <meta lang="zh">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas | androidpi</title>
<meta name="description" content="å‚è€ƒï¼š Lambdas é«˜é˜¶å‡½æ•° ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/solid.css" integrity="sha384-TbilV5Lbhlwdyc4RuIV/JhD8NR+BfMrvz4BL5QFa2we1hQu6wvREr3v6XSRfCTRp" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/brands.css" integrity="sha384-7xAnn7Zm3QC1jFjVc1A6v/toepoG3JXboQYzbM0jrPzou9OFXm/fY6Z/XiIebl/k" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/fontawesome.css" integrity="sha384-ozJwkrqb90Oa3ZNb+yKFW2lToAWYdTiF1vt8JiH5ptTGHTGcN7qdoR1F95e0kYyG" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
        
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="/css/article.css" />

    </head>

    <body>
        <div class="site-wrapper">
                <header>
    <nav>
        <a class="home" href="https://epicmars.github.io/">é¦–é¡µ</a>
    </nav>
    
</header>
                <div class="site-main">
                    
    <div class="main">
        <div class="article">
            <aside>
                    <nav id="TableOfContents">
  <ul>
    <li><a href="#é«˜é˜¶å‡½æ•°">é«˜é˜¶å‡½æ•°</a></li>
    <li><a href="#lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°">Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°</a>
      <ul>
        <li><a href="#å‡½æ•°ç±»å‹">å‡½æ•°ç±»å‹</a></li>
        <li><a href="#lambdaè¡¨è¾¾å¼è¯­æ³•">Lambdaè¡¨è¾¾å¼è¯­æ³•</a></li>
        <li><a href="#åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°</a></li>
        <li><a href="#é—­åŒ…closures">é—­åŒ…ï¼ˆClosuresï¼‰</a></li>
        <li><a href="#å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡">å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡</a></li>
      </ul>
    </li>
  </ul>
</nav>
            </aside>
            <article>
                <div class="title">
                    <h1 id="title">Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas</h1>
                </div>
                <div class="content">
                        <p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://kotlinlang.org/docs/reference/lambdas.html">Lambdas</a></li>
</ul>
<h2 id="é«˜é˜¶å‡½æ•°">é«˜é˜¶å‡½æ•°</h2>
<p>ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”ï¼Œè¿è¡Œå‡½æ•°ï¼Œç„¶åé‡Šæ”¾é”ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">T</span>&gt; <span style="color:#a6e22e">lock</span>(lock: Lock, body: () <span style="color:#f92672">-&gt;</span> T): T {
</span></span><span style="display:flex;"><span>        lock.lock()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> body()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">finally</span> {
</span></span><span style="display:flex;"><span>            lock.unlock()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>bodyæœ‰ä¸€ä¸ª<a href="https://kotlinlang.org/docs/reference/lambdas.html#function-types">å‡½æ•°ç±»å‹</a>ï¼š() -&gt; Tï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å€¼çš„æ–¹æ³•ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨lock()ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼ˆå‚è€ƒï¼š<a href="https://kotlinlang.org/docs/reference/reflection.html#function-references">æ–¹æ³•å¼•ç”¨</a>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">toBeSynchronized</span>() = sharedResource.operation()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> result = lock(lock, <span style="color:#f92672">::</span>toBeSynchronized)
</span></span></code></pre></div><p>æ­¤å¤–ï¼Œä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ–¹å¼æ˜¯ä¼ é€’ä¸€ä¸ª<a href="https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions">lambdaè¡¨è¾¾å¼</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> result = lock(lock, { sharedResource.operation() })
</span></span></code></pre></div><p>Lambdaè¡¨è¾¾å¼å…ˆç®€è¦ä»‹ç»ä¸‹ï¼Œåé¢å°èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ï¼š</p>
<ul>
<li>ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ€»æ˜¯ç”±èŠ±æ‹¬å¼§åŒ…å›´</li>
<li>å®ƒçš„å‚æ•°åœ¨è®°å·<code>-&gt;</code>å‰å£°æ˜ï¼Œå‚æ•°ç±»å‹å¯ä»¥å¿½ç•¥</li>
<li>æ­£æ–‡è·Ÿåœ¨<code>-&gt;</code>å</li>
</ul>
<p>åœ¨Kotlinä¸­å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨lambdaè¡¨è¾¾å¼ä¼ é€’å¯¹åº”çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œå³å°†lambdaè¡¨è¾¾å¼æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨æ‹¬å¼§å¤–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    lock (lock) {
</span></span><span style="display:flex;"><span>        sharedResource.operation()
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>å¦ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹map()å‡½æ•°æ‰€ç¤ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">T</span>, <span style="color:#a6e22e">R</span>&gt; <span style="color:#a6e22e">List</span>&lt;T&gt;.map(transform: (T) <span style="color:#f92672">-&gt;</span> R): List&lt;R&gt; {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> result = arrayListOf&lt;R&gt;()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (item <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">this</span>)
</span></span><span style="display:flex;"><span>            result.add(transform(item))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> result
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>è¯¥å‡½æ•°å¯ä»¥å¦‚ä¸‹è°ƒç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> doubled = ints.map { <span style="color:#66d9ef">value</span> <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">value</span> * <span style="color:#ae81ff">2</span> }
</span></span></code></pre></div><p><em>è¯­æ³•ç³–</em></p>
<blockquote>
<p>å¦‚æœlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°ï¼Œé‚£ä¹ˆå‚æ•°æ‹¬å¼§ä¹Ÿå¯ä»¥çœç•¥ã€‚</p>
<p>å¦ä¸€ä¸ªæƒ¯ç”¨æ³•æ˜¯ï¼Œå¦‚æœå‡½æ•°ä»…æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°çš„å£°æ˜ï¼ˆä»¥åŠåé¢çš„<code>-&gt;</code>ï¼‰å¯ä»¥å¿½ç•¥ï¼Œå¹¶ä½¿ç”¨<code>it</code>ä»£è¡¨è¯¥å‚æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    ints.map { <span style="color:#66d9ef">it</span> * <span style="color:#ae81ff">2</span> }
</span></span></code></pre></div><p>å®ƒå…è®¸ç¼–å†™<a href="http://msdn.microsoft.com/en-us/library/bb308959.aspx">LINQæ ·å¼</a>çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    strings.filter { <span style="color:#66d9ef">it</span>.length <span style="color:#f92672">==</span> <span style="color:#ae81ff">5</span> }.sortedBy { <span style="color:#66d9ef">it</span> }.map { <span style="color:#66d9ef">it</span>.toUpperCase() }
</span></span></code></pre></div><p>å¦‚æœlambdaå‚æ•°æœªä½¿ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿å£°æ˜ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    map.forEach { _, <span style="color:#66d9ef">value</span> <span style="color:#f92672">-&gt;</span> println(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$value</span><span style="color:#e6db74">!&#34;</span>) }
</span></span></code></pre></div></blockquote>
<h2 id="lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°">Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°</h2>
<p>ä¸€ä¸ªlambdaè¡¨è¾¾å¼æˆ–åŒ¿åå‡½æ•°æ˜¯ä¸€ä¸ªâ€œå‡½æ•°å­—é¢é‡ï¼ˆfunction literalï¼‰â€ï¼Œä¹Ÿå°±æ˜¯æœªå£°æ˜çš„å‡½æ•°ï¼Œä½œä¸ºè¡¨è¾¾å¼ç›´æ¥ä¼ é€’ã€‚è€ƒè™‘å¦‚ä¸‹ä¾‹å­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    max(strings, { a, b <span style="color:#f92672">-&gt;</span> a.length &lt; b.length })
</span></span></code></pre></div><p>å‡½æ•°maxæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªèº«ä¸ºå‡½æ•°çš„ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å­—é¢é‡ã€‚ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç­‰ä»·äºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">compare</span>(a: String, b: String): Boolean = a.length &lt; b.length
</span></span></code></pre></div><h3 id="å‡½æ•°ç±»å‹">å‡½æ•°ç±»å‹</h3>
<p>ä¸ºäº†è®©ä¸€ä¸ªå‡½æ•°æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¿…é¡»ä¸ºæ¥æ”¶çš„å‚æ•°æŒ‡å®šä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œmaxçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> &lt;<span style="color:#a6e22e">T</span>&gt; <span style="color:#a6e22e">max</span>(collection: Collection&lt;T&gt;, less: (T, T) <span style="color:#f92672">-&gt;</span> Boolean): T? {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">var</span> max: T? = <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">it</span> <span style="color:#66d9ef">in</span> collection)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (max <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> less(max, <span style="color:#66d9ef">it</span>))
</span></span><span style="display:flex;"><span>                max = <span style="color:#66d9ef">it</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> max
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>å‚æ•°lessçš„ç±»å‹æ˜¯<code>(T, T) -&gt; Boolean</code>ï¼Œå³ä¸€ä¸ªæ¥æ”¶ä¸¤ä¸ªç±»å‹ä¸ºTçš„å‚æ•°å¹¶è¿”å›ä¸€ä¸ªBooleanå€¼çš„å‡½æ•°ï¼Œå®ƒçš„è¡Œä¸ºæ˜¯å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°å°äºç¬¬äºŒä¸ªå‚æ•°å°±è¿”å›trueã€‚</p>
<p>å‡½æ•°ç±»å‹ä¸­çš„å‚æ•°å¯ä»¥å‘½åï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> compare: (x: T, y: T) <span style="color:#f92672">-&gt;</span> Int = <span style="color:#f92672">..</span>.
</span></span></code></pre></div><p>å¦‚æœå£°æ˜äº†ä¸€ä¸ªå¯ä»¥ä¸ºç©ºçš„å‡½æ•°ç±»å‹å˜é‡ï¼Œå°†å‡½æ•°ç±»å‹ç”¨æ‹¬å¼§åŒ…å›´å¹¶åŠ ä¸€ä¸ªé—®å·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> sum: ((Int, Int) <span style="color:#f92672">-&gt;</span> Int)? = <span style="color:#66d9ef">null</span>
</span></span></code></pre></div><h3 id="lambdaè¡¨è¾¾å¼è¯­æ³•">Lambdaè¡¨è¾¾å¼è¯­æ³•</h3>
<p>Lambdaè¡¨è¾¾å¼çš„å®Œæ•´è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> sum = { x: Int, y: Int <span style="color:#f92672">-&gt;</span> x + y }
</span></span></code></pre></div><p>ä¸€ä¸ªLambdaè¡¨è¾¾å¼æ€»æ˜¯ä½¿ç”¨èŠ±æ‹¬å¼§åŒ…å›´ï¼Œå‚æ•°å£°æ˜åœ¨èŠ±æ‹¬å·ä¸­ï¼Œå¯ä»¥æœ‰å¯é€‰çš„ç±»å‹æ ‡è¯†ï¼Œæ­£æ–‡è·Ÿåœ¨å³ç®­å¤´ç¬¦å·<code>-&gt;</code>åã€‚å¦‚æœæ¨æ–­å‡ºlambdaè¿”å›ç±»å‹ä¸æ˜¯Unitï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼å°±æ˜¯è¿”å›å€¼ã€‚</p>
<p>å¦‚æœå°†å¯é€‰çš„æ ‡è¯†ç§»åˆ°å¤–é¢ï¼Œå¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> sum: (Int, Int) <span style="color:#f92672">-&gt;</span> Int = { x, y <span style="color:#f92672">-&gt;</span> x + y }
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://kotlinlang.org/docs/reference/returns.html#return-at-labels">é™å®šçš„return</a>è¯­æ³•ä»lambdaä¸­æ˜¾å¼åœ°è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦åˆ™ä¼šè¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä¸‹é¢ä¸¤ç§è¡¨ç¤ºæ˜¯ç­‰ä»·çš„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    ints.filter {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> shouldFilter = <span style="color:#66d9ef">it</span> &gt; <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>        shouldFilter
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ints.filter {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> shouldFilter = <span style="color:#66d9ef">it</span> &gt; <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span><span style="color:#a6e22e">@filter</span> shouldFilter
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°</h3>
<p>ä¸Šé¢çš„lambdaè¡¨è¾¾å¼ä¸­ä¸èƒ½æŒ‡å®šå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿›è¡Œè‡ªåŠ¨æ¨æ–­ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³ç‰¹åˆ«æŒ‡å®šï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span>(x: Int, y: Int): Int = x + y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span>(x: Int, y: Int): Int {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> x + y
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><p>å‚æ•°å’Œè¿”å›ç±»å‹çš„æŒ‡å®šå’Œå¸¸è§„å‡½æ•°ä¸€æ ·ï¼Œé™¤äº†ä¸€ç‚¹ä»¥å¤–ï¼Œå³åŒ¿åå‡½æ•°å‚æ•°ç±»å‹å¦‚æœå¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶å¿½ç•¥ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    ints.filter(<span style="color:#66d9ef">fun</span>(item) = item &gt; <span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><p>åŒ¿åå‡½æ•°å’Œlambdaè¡¨è¾¾å¼çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸èƒ½ä½œä¸ºæ‹¬å¼§å¤–å‚æ•°ä¼ é€’ï¼Œæ­¤å¤–ï¼Œä¸¤è€…çš„<a href="https://kotlinlang.org/docs/reference/inline-functions.html#non-local-returns">éå±€éƒ¨è¿”å›(non-local returns)</a>è¡Œä¸ºä¹Ÿä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ— æ ‡ç­¾çš„returnæ€»æ˜¯ä»funå£°æ˜çš„å‡½æ•°å†…è¿”å›ï¼Œè¿™è¡¨æ˜lambdaè¡¨è¾¾å¼ä¸­çš„returnä¼šä»åŒ…å›´å‡½æ•°è¿”å›ï¼Œè€ŒåŒ¿åå‡½æ•°ä¼šä»è‡ªèº«è¿”å›ã€‚</p>
<h3 id="é—­åŒ…closures">é—­åŒ…ï¼ˆClosuresï¼‰</h3>
<p>ä¸€ä¸ªlambdaè¡¨è¾¾å¼æˆ–è€…åŒ¿åå‡½æ•°ï¼ˆä»¥åŠå±€éƒ¨å‡½æ•°å’Œå¯¹è±¡è¡¨è¾¾å¼ï¼‰å¯ä»¥è®¿é—®å…¶é—­åŒ…ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤–éƒ¨èŒƒå›´å£°æ˜çš„å˜é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> sum = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    ints.filter { <span style="color:#66d9ef">it</span> &gt; <span style="color:#ae81ff">0</span> }.forEach {
</span></span><span style="display:flex;"><span>        sum <span style="color:#f92672">+=</span> <span style="color:#66d9ef">it</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    print(sum)
</span></span></code></pre></div><h3 id="å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡">å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡</h3>
<p>Kotlinå…è®¸ç”¨ä¸€ä¸ªæŒ‡å®šçš„æ¥æ”¶å¯¹è±¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°å­—é¢é‡ã€‚åœ¨å‡½æ•°å­—é¢é‡çš„æ­£æ–‡ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥è°ƒç”¨æ¥æ”¶å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼æ‰©å±•å‡½æ•°ï¼Œå®ƒå…è®¸ä½ åœ¨å‡½æ•°ä½“é‡è®¿é—®æ¥æ”¶å¯¹è±¡çš„æˆå‘˜ã€‚</p>
<p>è¿™ç§ç±»å‹çš„å‡½æ•°å­—é¢é‡æ˜¯ä¸€ä¸ªå¸¦æ¥æ”¶å™¨çš„å‡½æ•°ç±»å‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    sum : <span style="color:#a6e22e">Int</span>.(other: Int) <span style="color:#f92672">-&gt;</span> Int
</span></span></code></pre></div><p>å‡½æ•°å­—é¢é‡å¯ä»¥åƒæ¥å—å¯¹è±¡çš„æˆå‘˜ä¸€æ ·è¿›è¡Œè°ƒç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#ae81ff">1.</span>sum(<span style="color:#ae81ff">2</span>)
</span></span></code></pre></div><p>ä½ ä»¬å‡½æ•°è¯­æ³•å…è®¸ä½ ç›´æ¥æŒ‡å®šä¸€ä¸ªå‡½æ•°å­—é¢é‡çš„æ¥æ”¶å™¨ç±»å‹ã€‚å¦‚æœä½ éœ€è¦å£°æ˜ä¸€ä¸ªå¸¦æ¥æ”¶å™¨çš„å‡½æ•°ç±»å‹å˜é‡ï¼Œè¿™å°±ååˆ†æœ‰ç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> sum = <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">Int</span>.(other: Int): Int = <span style="color:#66d9ef">this</span> + other
</span></span></code></pre></div><p>å¯¹äºä¸€ä¸ªå¸¦æ¥æ”¶å™¨å‡½æ•°ç±»å‹çš„éå­—é¢é‡å€¼ï¼Œåœ¨ä¸€ä¸ªæ¥æ”¶å¸¸è§„å‡½æ•°ä½œä¸ºå‚æ•°çš„åœ°æ–¹å¹¶ä¸”è¯¥å¸¸è§„å‡½æ•°ç±»å‹ç¬¬ä¸€ä¸ªå‚æ•°ä¸è¯¥å€¼çš„æ¥æ”¶å™¨ç±»å‹ä¸€æ ·ï¼Œé‚£ä¹ˆè¯¥å€¼å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œåä¹‹äº¦ç„¶ã€‚ä¾‹å¦‚ï¼Œç±»å‹<code>String.(Int) -&gt; Boolean</code>å’Œ<code>(String, Int) -&gt; Boolean</code>æ˜¯å…¼å®¹çš„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">val</span> represents: <span style="color:#a6e22e">String</span>.(Int) <span style="color:#f92672">-&gt;</span> Boolean = { other <span style="color:#f92672">-&gt;</span> toIntOrNull() <span style="color:#f92672">==</span> other }
</span></span><span style="display:flex;"><span>    println(<span style="color:#e6db74">&#34;123&#34;</span>.represents(<span style="color:#ae81ff">123</span>)) <span style="color:#75715e">// true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">testOperation</span>(op: (String, Int) <span style="color:#f92672">-&gt;</span> Boolean, a: String, b: Int, c: Boolean) =
</span></span><span style="display:flex;"><span>        assert(op(a, b) <span style="color:#f92672">==</span> c)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    testOperation(represents, <span style="color:#e6db74">&#34;100&#34;</span>, <span style="color:#ae81ff">100</span>, <span style="color:#66d9ef">true</span>) <span style="color:#75715e">// OK
</span></span></span></code></pre></div><p>å½“æ¥æ”¶å™¨ç±»å‹å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºæ—¶ï¼ŒLambdaè¡¨è¾¾å¼å¯ä»¥ç”¨ä½œå¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>    <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HTML</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">body</span>() { <span style="color:#f92672">..</span>. }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">html</span>(<span style="color:#66d9ef">init</span>: <span style="color:#a6e22e">HTML</span>.() <span style="color:#f92672">-&gt;</span> Unit): HTML {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">val</span> html = HTML()  <span style="color:#75715e">// create the receiver object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        html.<span style="color:#66d9ef">init</span>()        <span style="color:#75715e">// pass the receiver object to the lambda
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> html
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    html {       <span style="color:#75715e">// lambda with receiver begins here
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        body()   <span style="color:#75715e">// calling a method on the receiver object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span></code></pre></div>
                </div>
                
            </article>
        </div>
    </div>

                </div>
                <footer>
    Powered by <a target="_blank" href="https://gohugo.io/">Hugo</a> And 
    <a target="_blank" href="https://pages.github.com/">Github Pages</a>
</footer>
                <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
                

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>

                <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.12.0/styles/default.min.css">
                <script src="/js/highlight.pack.js"></script>
                <script src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
                <script type="text/javascript" async src="https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [
                ['$', '$'],
                ['\\(', '\\)']
            ],
            displayMath: [
                ['$$', '$$']
            ],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: {
                equationNumbers: {
                    autoNumber: "AMS"
                },
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
        }
    });
    MathJax.Hub.Queue(function () {



        var all = MathJax.Hub.getAllJax(),
            i;
        for (i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

    MathJax.Hub.Config({

        TeX: {
            equationNumbers: {
                autoNumber: "AMS"
            }
        }
    });
</script>
                <script type="text/javascript" src="/js/main.js"></script>
        </div>
    </body>

</html>