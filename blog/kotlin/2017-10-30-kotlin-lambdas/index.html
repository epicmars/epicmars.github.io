<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas | AndroidPi</title>
<meta name=keywords content><meta name=description content="å‚è€ƒï¼š
Lambdas é«˜é˜¶å‡½æ•° ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”ï¼Œè¿è¡Œå‡½æ•°ï¼Œç„¶åé‡Šæ”¾é”ï¼š
fun <T> lock(lock: Lock, body: () -> T): T { lock.lock() try { return body() } finally { lock.unlock() } } bodyæœ‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼š() -> Tï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å€¼çš„æ–¹æ³•ã€‚
å¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨lock()ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼ˆå‚è€ƒï¼šæ–¹æ³•å¼•ç”¨):
fun toBeSynchronized() = sharedResource.operation() val result = lock(lock, ::toBeSynchronized) æ­¤å¤–ï¼Œä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ–¹å¼æ˜¯ä¼ é€’ä¸€ä¸ªlambdaè¡¨è¾¾å¼:
val result = lock(lock, { sharedResource.operation() }) Lambdaè¡¨è¾¾å¼å…ˆç®€è¦ä»‹ç»ä¸‹ï¼Œåé¢å°èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ï¼š
ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ€»æ˜¯ç”±èŠ±æ‹¬å¼§åŒ…å›´ å®ƒçš„å‚æ•°åœ¨è®°å·->å‰å£°æ˜ï¼Œå‚æ•°ç±»å‹å¯ä»¥å¿½ç•¥ æ­£æ–‡è·Ÿåœ¨->å åœ¨Kotlinä¸­å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨lambdaè¡¨è¾¾å¼ä¼ é€’å¯¹åº”çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œå³å°†lambdaè¡¨è¾¾å¼æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨æ‹¬å¼§å¤–ï¼š
lock (lock) { sharedResource.operation() } å¦ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹map()å‡½æ•°æ‰€ç¤ºï¼š
fun <T, R> List<T>.map(transform: (T) -> R): List<R> { val result = arrayListOf<R>() for (item in this) result."><meta name=author content="LEOY"><link rel=canonical href=https://epicmars.github.io/blog/kotlin/2017-10-30-kotlin-lambdas/><link crossorigin=anonymous href=/assets/css/stylesheet.3045213cee0439fa94bd732879be5b19072f75f4d28f6e62dd58c34f5243e49f.css integrity="sha256-MEUhPO4EOfqUvXMoeb5bGQcvdfTSj25i3VjDT1JD5J8=" rel="preload stylesheet" as=style><link rel=icon href=https://acd-assets.alicdn.com/acd_work/tongyi/assets/logo.svg><link rel=icon type=image/png sizes=16x16 href=https://acd-assets.alicdn.com/acd_work/tongyi/assets/logo.svg><link rel=icon type=image/png sizes=32x32 href=https://acd-assets.alicdn.com/acd_work/tongyi/assets/logo.svg%22><link rel=apple-touch-icon href=https://acd-assets.alicdn.com/acd_work/tongyi/assets/logo.svg><link rel=mask-icon href=https://acd-assets.alicdn.com/acd_work/tongyi/assets/logo.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://epicmars.github.io/blog/kotlin/2017-10-30-kotlin-lambdas/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script defer crossorigin=anonymous src=/js/custom.f20a5212619392e989b6d24ad9ce42302014debfad4d3c8c01db030c36d03475.js integrity="sha256-8gpSEmGTkumJttJK2c5CMCAU3r+tTTyMAdsDDDbQNHU="></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css integrity=sha384-Juol1FqnotbkyZUT5Z7gUPjQ9gzlwCENvUZTpQBAPxtusdwFLRy382PSDx5UUJ4/ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.js integrity=sha384-97gW6UIJxnlKemYavrqDHSX3SiygeOwIZhwyOKRfSaf0JWKRVj9hLASHgFTzT+0O crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-NMEMBZ8R90"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-NMEMBZ8R90")}</script><meta property="og:title" content="Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas"><meta property="og:description" content="å‚è€ƒï¼š
Lambdas é«˜é˜¶å‡½æ•° ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”ï¼Œè¿è¡Œå‡½æ•°ï¼Œç„¶åé‡Šæ”¾é”ï¼š
fun <T> lock(lock: Lock, body: () -> T): T { lock.lock() try { return body() } finally { lock.unlock() } } bodyæœ‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼š() -> Tï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å€¼çš„æ–¹æ³•ã€‚
å¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨lock()ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼ˆå‚è€ƒï¼šæ–¹æ³•å¼•ç”¨):
fun toBeSynchronized() = sharedResource.operation() val result = lock(lock, ::toBeSynchronized) æ­¤å¤–ï¼Œä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ–¹å¼æ˜¯ä¼ é€’ä¸€ä¸ªlambdaè¡¨è¾¾å¼:
val result = lock(lock, { sharedResource.operation() }) Lambdaè¡¨è¾¾å¼å…ˆç®€è¦ä»‹ç»ä¸‹ï¼Œåé¢å°èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ï¼š
ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ€»æ˜¯ç”±èŠ±æ‹¬å¼§åŒ…å›´ å®ƒçš„å‚æ•°åœ¨è®°å·->å‰å£°æ˜ï¼Œå‚æ•°ç±»å‹å¯ä»¥å¿½ç•¥ æ­£æ–‡è·Ÿåœ¨->å åœ¨Kotlinä¸­å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨lambdaè¡¨è¾¾å¼ä¼ é€’å¯¹åº”çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œå³å°†lambdaè¡¨è¾¾å¼æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨æ‹¬å¼§å¤–ï¼š
lock (lock) { sharedResource.operation() } å¦ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹map()å‡½æ•°æ‰€ç¤ºï¼š
fun <T, R> List<T>.map(transform: (T) -> R): List<R> { val result = arrayListOf<R>() for (item in this) result."><meta property="og:type" content="article"><meta property="og:url" content="https://epicmars.github.io/blog/kotlin/2017-10-30-kotlin-lambdas/"><meta property="og:image" content="https://epicmars.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="blog"><meta property="article:published_time" content="2017-10-30T16:34:18+08:00"><meta property="article:modified_time" content="2017-10-30T16:34:18+08:00"><meta property="og:site_name" content="androidpi"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://epicmars.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas"><meta name=twitter:description content="å‚è€ƒï¼š
Lambdas é«˜é˜¶å‡½æ•° ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”ï¼Œè¿è¡Œå‡½æ•°ï¼Œç„¶åé‡Šæ”¾é”ï¼š
fun <T> lock(lock: Lock, body: () -> T): T { lock.lock() try { return body() } finally { lock.unlock() } } bodyæœ‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼š() -> Tï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å€¼çš„æ–¹æ³•ã€‚
å¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨lock()ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼ˆå‚è€ƒï¼šæ–¹æ³•å¼•ç”¨):
fun toBeSynchronized() = sharedResource.operation() val result = lock(lock, ::toBeSynchronized) æ­¤å¤–ï¼Œä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ–¹å¼æ˜¯ä¼ é€’ä¸€ä¸ªlambdaè¡¨è¾¾å¼:
val result = lock(lock, { sharedResource.operation() }) Lambdaè¡¨è¾¾å¼å…ˆç®€è¦ä»‹ç»ä¸‹ï¼Œåé¢å°èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ï¼š
ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ€»æ˜¯ç”±èŠ±æ‹¬å¼§åŒ…å›´ å®ƒçš„å‚æ•°åœ¨è®°å·->å‰å£°æ˜ï¼Œå‚æ•°ç±»å‹å¯ä»¥å¿½ç•¥ æ­£æ–‡è·Ÿåœ¨->å åœ¨Kotlinä¸­å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨lambdaè¡¨è¾¾å¼ä¼ é€’å¯¹åº”çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œå³å°†lambdaè¡¨è¾¾å¼æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨æ‹¬å¼§å¤–ï¼š
lock (lock) { sharedResource.operation() } å¦ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹map()å‡½æ•°æ‰€ç¤ºï¼š
fun <T, R> List<T>.map(transform: (T) -> R): List<R> { val result = arrayListOf<R>() for (item in this) result."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://epicmars.github.io/blog/"},{"@type":"ListItem","position":2,"name":"Kotlin","item":"https://epicmars.github.io/blog/kotlin/"},{"@type":"ListItem","position":3,"name":"Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas","item":"https://epicmars.github.io/blog/kotlin/2017-10-30-kotlin-lambdas/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas","name":"Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas","description":"å‚è€ƒï¼š\nLambdas é«˜é˜¶å‡½æ•° ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”ï¼Œè¿è¡Œå‡½æ•°ï¼Œç„¶åé‡Šæ”¾é”ï¼š\nfun \u0026lt;T\u0026gt; lock(lock: Lock, body: () -\u0026gt; T): T { lock.lock() try { return body() } finally { lock.unlock() } } bodyæœ‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼š() -\u0026gt; Tï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å€¼çš„æ–¹æ³•ã€‚\nå¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨lock()ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼ˆå‚è€ƒï¼šæ–¹æ³•å¼•ç”¨):\nfun toBeSynchronized() = sharedResource.operation() val result = lock(lock, ::toBeSynchronized) æ­¤å¤–ï¼Œä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ–¹å¼æ˜¯ä¼ é€’ä¸€ä¸ªlambdaè¡¨è¾¾å¼:\nval result = lock(lock, { sharedResource.operation() }) Lambdaè¡¨è¾¾å¼å…ˆç®€è¦ä»‹ç»ä¸‹ï¼Œåé¢å°èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ï¼š\nä¸€ä¸ªlambdaè¡¨è¾¾å¼æ€»æ˜¯ç”±èŠ±æ‹¬å¼§åŒ…å›´ å®ƒçš„å‚æ•°åœ¨è®°å·-\u0026gt;å‰å£°æ˜ï¼Œå‚æ•°ç±»å‹å¯ä»¥å¿½ç•¥ æ­£æ–‡è·Ÿåœ¨-\u0026gt;å åœ¨Kotlinä¸­å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨lambdaè¡¨è¾¾å¼ä¼ é€’å¯¹åº”çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œå³å°†lambdaè¡¨è¾¾å¼æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨æ‹¬å¼§å¤–ï¼š\nlock (lock) { sharedResource.operation() } å¦ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹map()å‡½æ•°æ‰€ç¤ºï¼š\nfun \u0026lt;T, R\u0026gt; List\u0026lt;T\u0026gt;.map(transform: (T) -\u0026gt; R): List\u0026lt;R\u0026gt; { val result = arrayListOf\u0026lt;R\u0026gt;() for (item in this) result.","keywords":[],"articleBody":"å‚è€ƒï¼š\nLambdas é«˜é˜¶å‡½æ•° ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”ï¼Œè¿è¡Œå‡½æ•°ï¼Œç„¶åé‡Šæ”¾é”ï¼š\nfun \u003cT\u003e lock(lock: Lock, body: () -\u003e T): T { lock.lock() try { return body() } finally { lock.unlock() } } bodyæœ‰ä¸€ä¸ªå‡½æ•°ç±»å‹ï¼š() -\u003e Tï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å€¼çš„æ–¹æ³•ã€‚\nå¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨lock()ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼ˆå‚è€ƒï¼šæ–¹æ³•å¼•ç”¨):\nfun toBeSynchronized() = sharedResource.operation() val result = lock(lock, ::toBeSynchronized) æ­¤å¤–ï¼Œä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ–¹å¼æ˜¯ä¼ é€’ä¸€ä¸ªlambdaè¡¨è¾¾å¼:\nval result = lock(lock, { sharedResource.operation() }) Lambdaè¡¨è¾¾å¼å…ˆç®€è¦ä»‹ç»ä¸‹ï¼Œåé¢å°èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ï¼š\nä¸€ä¸ªlambdaè¡¨è¾¾å¼æ€»æ˜¯ç”±èŠ±æ‹¬å¼§åŒ…å›´ å®ƒçš„å‚æ•°åœ¨è®°å·-\u003eå‰å£°æ˜ï¼Œå‚æ•°ç±»å‹å¯ä»¥å¿½ç•¥ æ­£æ–‡è·Ÿåœ¨-\u003eå åœ¨Kotlinä¸­å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨lambdaè¡¨è¾¾å¼ä¼ é€’å¯¹åº”çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œå³å°†lambdaè¡¨è¾¾å¼æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨æ‹¬å¼§å¤–ï¼š\nlock (lock) { sharedResource.operation() } å¦ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹map()å‡½æ•°æ‰€ç¤ºï¼š\nfun \u003cT, R\u003e List\u003cT\u003e.map(transform: (T) -\u003e R): List\u003cR\u003e { val result = arrayListOf\u003cR\u003e() for (item in this) result.add(transform(item)) return result } è¯¥å‡½æ•°å¯ä»¥å¦‚ä¸‹è°ƒç”¨ï¼š\nval doubled = ints.map { value -\u003e value * 2 } è¯­æ³•ç³–\nå¦‚æœlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°ï¼Œé‚£ä¹ˆå‚æ•°æ‹¬å¼§ä¹Ÿå¯ä»¥çœç•¥ã€‚\nå¦ä¸€ä¸ªæƒ¯ç”¨æ³•æ˜¯ï¼Œå¦‚æœå‡½æ•°ä»…æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°çš„å£°æ˜ï¼ˆä»¥åŠåé¢çš„-\u003eï¼‰å¯ä»¥å¿½ç•¥ï¼Œå¹¶ä½¿ç”¨itä»£è¡¨è¯¥å‚æ•°ï¼š\nints.map { it * 2 } å®ƒå…è®¸ç¼–å†™LINQæ ·å¼çš„ä»£ç ï¼š\nstrings.filter { it.length == 5 }.sortedBy { it }.map { it.toUpperCase() } å¦‚æœlambdaå‚æ•°æœªä½¿ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿å£°æ˜ï¼š\nmap.forEach { _, value -\u003e println(\"$value!\") } Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•° ä¸€ä¸ª\blambdaè¡¨è¾¾å¼æˆ–åŒ¿åå‡½æ•°æ˜¯ä¸€ä¸ªâ€œå‡½æ•°\u001b\bå­—é¢é‡ï¼ˆfunction literalï¼‰â€ï¼Œä¹Ÿå°±æ˜¯æœªå£°æ˜çš„å‡½æ•°ï¼Œä½œä¸ºè¡¨è¾¾å¼ç›´æ¥ä¼ é€’ã€‚è€ƒè™‘å¦‚ä¸‹ä¾‹å­ï¼š\nmax(strings, { a, b -\u003e a.length \u003c b.length }) å‡½æ•°maxæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªèº«ä¸ºå‡½æ•°çš„ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å­—é¢é‡ã€‚ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç­‰ä»·äºï¼š\nfun compare(a: String, b: String): Boolean = a.length \u003c b.length å‡½æ•°ç±»å‹ ä¸ºäº†è®©ä¸€ä¸ªå‡½æ•°æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¿…é¡»ä¸ºæ¥æ”¶çš„å‚æ•°æŒ‡å®šä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œmaxçš„å®šä¹‰å¦‚ä¸‹ï¼š\nfun \u003cT\u003e max(collection: Collection\u003cT\u003e, less: (T, T) -\u003e Boolean): T? { var max: T? = null for (it in collection) if (max == null || less(max, it)) max = it return max } å‚æ•°lessçš„ç±»å‹æ˜¯(T, T) -\u003e Booleanï¼Œå³ä¸€ä¸ªæ¥æ”¶ä¸¤ä¸ªç±»å‹ä¸ºTçš„å‚æ•°å¹¶è¿”å›ä¸€ä¸ªBooleanå€¼çš„å‡½æ•°ï¼Œå®ƒçš„è¡Œä¸ºæ˜¯å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°å°äºç¬¬äºŒä¸ªå‚æ•°å°±è¿”å›trueã€‚\nå‡½æ•°ç±»å‹ä¸­çš„å‚æ•°å¯ä»¥å‘½åï¼š\nval compare: (x: T, y: T) -\u003e Int = ... å¦‚æœå£°æ˜äº†ä¸€ä¸ªå¯ä»¥ä¸ºç©ºçš„å‡½æ•°ç±»å‹å˜é‡ï¼Œå°†å‡½æ•°ç±»å‹ç”¨æ‹¬å¼§åŒ…å›´å¹¶åŠ ä¸€ä¸ªé—®å·ï¼š\nvar sum: ((Int, Int) -\u003e Int)? = null Lambdaè¡¨è¾¾å¼è¯­æ³• Lambdaè¡¨è¾¾å¼çš„å®Œæ•´è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š\nval sum = { x: Int, y: Int -\u003e x + y } ä¸€ä¸ªLambdaè¡¨è¾¾å¼æ€»æ˜¯ä½¿ç”¨èŠ±æ‹¬å¼§åŒ…å›´ï¼Œå‚æ•°å£°æ˜åœ¨èŠ±æ‹¬å·ä¸­ï¼Œå¯ä»¥æœ‰å¯é€‰çš„ç±»å‹æ ‡è¯†ï¼Œæ­£æ–‡è·Ÿåœ¨å³ç®­å¤´ç¬¦å·-\u003eåã€‚å¦‚æœæ¨æ–­å‡ºlambdaè¿”å›ç±»å‹ä¸æ˜¯Unitï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼å°±æ˜¯è¿”å›å€¼ã€‚\nå¦‚æœå°†å¯é€‰çš„æ ‡è¯†ç§»åˆ°å¤–é¢ï¼Œå¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š\nval sum: (Int, Int) -\u003e Int = { x, y -\u003e x + y } æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é™å®šçš„returnè¯­æ³•ä»lambdaä¸­æ˜¾å¼åœ°è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦åˆ™ä¼šè¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä¸‹é¢ä¸¤ç§è¡¨ç¤ºæ˜¯ç­‰ä»·çš„ï¼š\nints.filter { val shouldFilter = it \u003e 0 shouldFilter } ints.filter { val shouldFilter = it \u003e 0 return@filter shouldFilter } åŒ¿åå‡½æ•° ä¸Šé¢çš„lambdaè¡¨è¾¾å¼ä¸­ä¸èƒ½æŒ‡å®šå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿›è¡Œè‡ªåŠ¨æ¨æ–­ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³ç‰¹åˆ«æŒ‡å®šï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°ï¼š\nfun(x: Int, y: Int): Int = x + y fun(x: Int, y: Int): Int { return x + y } å‚æ•°å’Œè¿”å›ç±»å‹çš„æŒ‡å®šå’Œå¸¸è§„å‡½æ•°ä¸€æ ·ï¼Œé™¤äº†ä¸€ç‚¹ä»¥å¤–ï¼Œå³åŒ¿åå‡½æ•°å‚æ•°ç±»å‹å¦‚æœå¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶å¿½ç•¥ï¼š\nints.filter(fun(item) = item \u003e 0) åŒ¿åå‡½æ•°å’Œlambdaè¡¨è¾¾å¼çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸èƒ½ä½œä¸ºæ‹¬å¼§å¤–å‚æ•°ä¼ é€’ï¼Œæ­¤å¤–ï¼Œä¸¤è€…çš„éå±€éƒ¨è¿”å›(non-local returns)è¡Œä¸ºä¹Ÿä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ— æ ‡ç­¾çš„returnæ€»æ˜¯ä»funå£°æ˜çš„å‡½æ•°å†…è¿”å›ï¼Œè¿™è¡¨æ˜lambdaè¡¨è¾¾å¼ä¸­çš„returnä¼šä»åŒ…å›´å‡½æ•°è¿”å›ï¼Œè€ŒåŒ¿åå‡½æ•°ä¼šä»è‡ªèº«è¿”å›ã€‚\né—­åŒ…ï¼ˆClosuresï¼‰ ä¸€ä¸ªlambdaè¡¨è¾¾å¼æˆ–è€…åŒ¿åå‡½æ•°ï¼ˆä»¥åŠå±€éƒ¨å‡½æ•°å’Œå¯¹è±¡è¡¨è¾¾å¼ï¼‰å¯ä»¥è®¿é—®å…¶é—­åŒ…ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤–éƒ¨èŒƒå›´å£°æ˜çš„å˜é‡ã€‚\nvar sum = 0 ints.filter { it \u003e 0 }.forEach { sum += it } print(sum) å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡ Kotlinå…è®¸ç”¨ä¸€ä¸ªæŒ‡å®šçš„æ¥æ”¶å¯¹è±¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°å­—é¢é‡ã€‚åœ¨å‡½æ•°å­—é¢é‡çš„æ­£æ–‡ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥è°ƒç”¨æ¥æ”¶å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼æ‰©å±•å‡½æ•°ï¼Œå®ƒå…è®¸ä½ åœ¨å‡½æ•°ä½“é‡è®¿é—®æ¥æ”¶å¯¹è±¡çš„æˆå‘˜ã€‚\nè¿™ç§ç±»å‹çš„å‡½æ•°å­—é¢é‡æ˜¯ä¸€ä¸ªå¸¦æ¥æ”¶å™¨çš„å‡½æ•°ç±»å‹ï¼š\nsum : Int.(other: Int) -\u003e Int å‡½æ•°å­—é¢é‡å¯ä»¥åƒæ¥å—å¯¹è±¡çš„æˆå‘˜ä¸€æ ·è¿›è¡Œè°ƒç”¨ï¼š\n1.sum(2) ä½ ä»¬å‡½æ•°è¯­æ³•å…è®¸ä½ ç›´æ¥æŒ‡å®šä¸€ä¸ªå‡½æ•°å­—é¢é‡çš„æ¥æ”¶å™¨ç±»å‹ã€‚å¦‚æœä½ éœ€è¦å£°æ˜ä¸€ä¸ªå¸¦æ¥æ”¶å™¨çš„å‡½æ•°ç±»å‹å˜é‡ï¼Œè¿™å°±ååˆ†æœ‰ç”¨ï¼š\nval sum = fun Int.(other: Int): Int = this + other å¯¹äºä¸€ä¸ªå¸¦æ¥æ”¶å™¨å‡½æ•°ç±»å‹çš„éå­—é¢é‡å€¼ï¼Œåœ¨ä¸€ä¸ªæ¥æ”¶å¸¸è§„å‡½æ•°ä½œä¸ºå‚æ•°çš„åœ°æ–¹å¹¶ä¸”è¯¥å¸¸è§„å‡½æ•°ç±»å‹ç¬¬ä¸€ä¸ªå‚æ•°ä¸è¯¥å€¼çš„æ¥æ”¶å™¨ç±»å‹ä¸€æ ·ï¼Œé‚£ä¹ˆè¯¥å€¼å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œåä¹‹äº¦ç„¶ã€‚ä¾‹å¦‚ï¼Œç±»å‹String.(Int) -\u003e Booleanå’Œ(String, Int) -\u003e Booleanæ˜¯å…¼å®¹çš„ï¼š\nval represents: String.(Int) -\u003e Boolean = { other -\u003e toIntOrNull() == other } println(\"123\".represents(123)) // true fun testOperation(op: (String, Int) -\u003e Boolean, a: String, b: Int, c: Boolean) = assert(op(a, b) == c) testOperation(represents, \"100\", 100, true) // OK å½“æ¥æ”¶å™¨ç±»å‹å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºæ—¶ï¼ŒLambdaè¡¨è¾¾å¼å¯ä»¥ç”¨ä½œå¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡ï¼š\nclass HTML { fun body() { ... } } fun html(init: HTML.() -\u003e Unit): HTML { val html = HTML() // create the receiver object html.init() // pass the receiver object to the lambda return html } html { // lambda with receiver begins here body() // calling a method on the receiver object } ","wordCount":"428","inLanguage":"en","datePublished":"2017-10-30T16:34:18+08:00","dateModified":"2017-10-30T16:34:18+08:00","author":{"@type":"Person","name":"LEOY"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://epicmars.github.io/blog/kotlin/2017-10-30-kotlin-lambdas/"},"publisher":{"@type":"Organization","name":"AndroidPi","logo":{"@type":"ImageObject","url":"https://acd-assets.alicdn.com/acd_work/tongyi/assets/logo.svg"}}}</script></head><body id=top><script>const hasHeaderBg=!1</script><header class=header><div class=nav-container><nav class=nav><div class=logo><a href=/ accesskey=h title="AndroidPi (Alt + H)"><svg width="25" height="24" viewBox="0 0 25 24" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient x1="76.7202373%" y1="41.6070847%" x2="18.306123%" y2="65.5065085%" id="linearGradient-9_1k7ha4jv-1"><stop stop-color="#797beb" offset="0"/><stop stop-color="#373080" offset="100%"/></linearGradient></defs><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="_ç¼–ç»„-7" fill="url(#linearGradient-9_1k7ha4jv-1)"><path d="M12.2746711.0C12.5125388.0 12.7434104.12583746 12.8693403.33556656l1.3852293 2.3769298h6.1425827C20.63502 2.71249636 20.8658915 2.83833382 20.9918215 3.04806292l1.7420308 2.97815322C22.8597822 6.23594524 22.8597822 6.5016021 22.7338523 6.7113312L22.6988718 6.76725896C22.6708873 6.80920478 22.6359068 6.8511506 22.5939301 6.88610545L21.2156969 9.24905331l3.050303 5.24322749L24.3429571 14.6041363C24.4339065 14.8138654 24.4548948 15.0795223 24.3919298 15.2682785l-1.6021086 2.7404602C22.6638912 18.2184678 22.4400158 18.3443053 22.195152 18.3443053L19.4176972 18.3582872 16.353402 23.6504515C16.227472 23.8601806 16.0035966 23.9860181 15.7587328 23.9860181L12.2886633 24H12.2396906C12.0158151 23.9860181 11.7989358 23.8601806 11.6869981 23.6644334l-1.490171-2.551704H4.13120166C4.0822289 21.1267113 4.04025225 21.1267113 3.9912795 21.1267113 3.75341183 21.1267113 3.52254028 21.0008739 3.39661034 20.7911448L1.79450165 18.0506845C1.66857171 17.8479464 1.66857171 17.5892805 1.79450165 17.3725604l1.37823324-2.3909117L.0944474553 9.69647539c-.1259299404-.20273813-.1259299404-.46140402.0-.678124089999999L1.80849387 6.02621614c.11193772-.2097291.34280928-.33556656.59466916-.33556656C2.466128 5.67666764 2.51510075 5.69064958 2.56407351 5.70463152H5.40449327L8.44080406.46140402C8.45479628.4194582 8.46179238.38450335 8.48278071.35653947L8.49677292.33556656C8.62270286.12583746 8.84657831.0 9.09144209.0H12.2816672 12.2746711zM9.04246933.72706088 5.74730256 6.41071949H2.3751786L8.93752771 17.6871541H5.59338819l-1.61610091 2.789397H10.5606247l1.6790659 2.8942616 6.5623491-11.3043985 1.6790659 2.8802797L23.7203035 14.9327119 20.4181406 9.24905331l1.6650737-2.8662977L9.00049268 6.39673755 10.6795586 3.51645791 9.04946544.72706088H9.04246933zM16.1435187 9.82930382 12.2187023 16.5755899 8.2938858 9.82930382h7.8496329z" id="_å½¢çŠ¶"/></g></g></svg></a><div class=logo-switches></div></div><ul id=menu><li><a href=/resources title=Resources><span>Resources</span></a></li><li><a href=/blog/ title=Blog><span>Blog</span></a></li><li><a href=/publication title=Publication><span>Publication</span></a></li><li><a href=/about title=About><span>About</span></a></li></ul></nav></div></header><div class=hero-container><div class=hero><h1 class=post-title>Kotliné«˜é˜¶å‡½æ•°ä¸Lambdas</h1><div class=post-meta><span title='2017-10-30 16:34:18 +0800 CST'>October 30, 2017</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;428 words&nbsp;Â·&nbsp;LEOY</div></div></div><main class=main><article class=post-single><div class=post-content><p>å‚è€ƒï¼š</p><ul><li><a href=https://kotlinlang.org/docs/reference/lambdas.html>Lambdas</a></li></ul><h2 id=é«˜é˜¶å‡½æ•°>é«˜é˜¶å‡½æ•°<a hidden class=anchor aria-hidden=true href=#é«˜é˜¶å‡½æ•°>#</a></h2><p>ä¸€ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶å‡½æ•°ä½œä¸ºå…¶å‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œlock()å‡½æ•°æ¥æ”¶ä¸€ä¸ªlockå¯¹è±¡å’Œä¸€ä¸ªå‡½æ•°ï¼Œè·å–é”ï¼Œè¿è¡Œå‡½æ•°ï¼Œç„¶åé‡Šæ”¾é”ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>fun</span> <span class=p>&lt;</span><span class=nc>T</span><span class=p>&gt;</span> <span class=nf>lock</span><span class=p>(</span><span class=n>lock</span><span class=p>:</span> <span class=n>Lock</span><span class=p>,</span> <span class=n>body</span><span class=p>:</span> <span class=p>()</span> <span class=o>-&gt;</span> <span class=n>T</span><span class=p>):</span> <span class=n>T</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>lock</span><span class=p>.</span><span class=n>lock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>body</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>finally</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>lock</span><span class=p>.</span><span class=n>unlock</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>bodyæœ‰ä¸€ä¸ª<a href=https://kotlinlang.org/docs/reference/lambdas.html#function-types>å‡½æ•°ç±»å‹</a>ï¼š() -> Tï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å€¼çš„æ–¹æ³•ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨lock()ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒï¼ˆå‚è€ƒï¼š<a href=https://kotlinlang.org/docs/reference/reflection.html#function-references>æ–¹æ³•å¼•ç”¨</a>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>toBeSynchronized</span><span class=p>()</span> <span class=p>=</span> <span class=n>sharedResource</span><span class=p>.</span><span class=n>operation</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>val</span> <span class=py>result</span> <span class=p>=</span> <span class=n>lock</span><span class=p>(</span><span class=n>lock</span><span class=p>,</span> <span class=o>::</span><span class=n>toBeSynchronized</span><span class=p>)</span>
</span></span></code></pre></div><p>æ­¤å¤–ï¼Œä¸€ä¸ªæ›´åŠ ä¾¿æ·çš„æ–¹å¼æ˜¯ä¼ é€’ä¸€ä¸ª<a href=https://kotlinlang.org/docs/reference/lambdas.html#lambda-expressions-and-anonymous-functions>lambdaè¡¨è¾¾å¼</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>val</span> <span class=py>result</span> <span class=p>=</span> <span class=n>lock</span><span class=p>(</span><span class=n>lock</span><span class=p>,</span> <span class=p>{</span> <span class=n>sharedResource</span><span class=p>.</span><span class=n>operation</span><span class=p>()</span> <span class=p>})</span>
</span></span></code></pre></div><p>Lambdaè¡¨è¾¾å¼å…ˆç®€è¦ä»‹ç»ä¸‹ï¼Œåé¢å°èŠ‚ä¼šæœ‰è¯¦ç»†æè¿°ï¼š</p><ul><li>ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ€»æ˜¯ç”±èŠ±æ‹¬å¼§åŒ…å›´</li><li>å®ƒçš„å‚æ•°åœ¨è®°å·<code>-></code>å‰å£°æ˜ï¼Œå‚æ•°ç±»å‹å¯ä»¥å¿½ç•¥</li><li>æ­£æ–‡è·Ÿåœ¨<code>-></code>å</li></ul><p>åœ¨Kotlinä¸­å¦‚æœä¸€ä¸ªå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨lambdaè¡¨è¾¾å¼ä¼ é€’å¯¹åº”çš„å‚æ•°ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œå³å°†lambdaè¡¨è¾¾å¼æ”¾åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨æ‹¬å¼§å¤–ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>lock</span> <span class=p>(</span><span class=n>lock</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sharedResource</span><span class=p>.</span><span class=n>operation</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>å¦ä¸€ä¸ªä¾‹å­ï¼Œå¦‚ä¸‹map()å‡½æ•°æ‰€ç¤ºï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>fun</span> <span class=p>&lt;</span><span class=nc>T</span><span class=p>,</span> <span class=nc>R</span><span class=p>&gt;</span> <span class=nf>List</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;.</span><span class=n>map</span><span class=p>(</span><span class=n>transform</span><span class=p>:</span> <span class=p>(</span><span class=n>T</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>R</span><span class=p>):</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>R</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>result</span> <span class=p>=</span> <span class=n>arrayListOf</span><span class=p>&lt;</span><span class=n>R</span><span class=p>&gt;()</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=n>item</span> <span class=k>in</span> <span class=k>this</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span><span class=p>.</span><span class=n>add</span><span class=p>(</span><span class=n>transform</span><span class=p>(</span><span class=n>item</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>è¯¥å‡½æ•°å¯ä»¥å¦‚ä¸‹è°ƒç”¨ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>val</span> <span class=py>doubled</span> <span class=p>=</span> <span class=n>ints</span><span class=p>.</span><span class=n>map</span> <span class=p>{</span> <span class=k>value</span> <span class=o>-&gt;</span> <span class=k>value</span> <span class=p>*</span> <span class=m>2</span> <span class=p>}</span>
</span></span></code></pre></div><p><em>è¯­æ³•ç³–</em></p><blockquote><p>å¦‚æœlambdaè¡¨è¾¾å¼æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°ï¼Œé‚£ä¹ˆå‚æ•°æ‹¬å¼§ä¹Ÿå¯ä»¥çœç•¥ã€‚</p><p>å¦ä¸€ä¸ªæƒ¯ç”¨æ³•æ˜¯ï¼Œå¦‚æœå‡½æ•°ä»…æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°çš„å£°æ˜ï¼ˆä»¥åŠåé¢çš„<code>-></code>ï¼‰å¯ä»¥å¿½ç•¥ï¼Œå¹¶ä½¿ç”¨<code>it</code>ä»£è¡¨è¯¥å‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>ints</span><span class=p>.</span><span class=n>map</span> <span class=p>{</span> <span class=k>it</span> <span class=p>*</span> <span class=m>2</span> <span class=p>}</span>
</span></span></code></pre></div><p>å®ƒå…è®¸ç¼–å†™<a href=http://msdn.microsoft.com/en-us/library/bb308959.aspx>LINQæ ·å¼</a>çš„ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>strings</span><span class=p>.</span><span class=n>filter</span> <span class=p>{</span> <span class=k>it</span><span class=p>.</span><span class=n>length</span> <span class=o>==</span> <span class=m>5</span> <span class=p>}.</span><span class=n>sortedBy</span> <span class=p>{</span> <span class=k>it</span> <span class=p>}.</span><span class=n>map</span> <span class=p>{</span> <span class=k>it</span><span class=p>.</span><span class=n>toUpperCase</span><span class=p>()</span> <span class=p>}</span>
</span></span></code></pre></div><p>å¦‚æœlambdaå‚æ•°æœªä½¿ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿å£°æ˜ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>map</span><span class=p>.</span><span class=n>forEach</span> <span class=p>{</span> <span class=n>_</span><span class=p>,</span> <span class=k>value</span> <span class=o>-&gt;</span> <span class=n>println</span><span class=p>(</span><span class=s2>&#34;</span><span class=si>$value</span><span class=s2>!&#34;</span><span class=p>)</span> <span class=p>}</span>
</span></span></code></pre></div></blockquote><h2 id=lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°>Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°<a hidden class=anchor aria-hidden=true href=#lambdaè¡¨è¾¾å¼ä¸åŒ¿åå‡½æ•°>#</a></h2><p>ä¸€ä¸ªlambdaè¡¨è¾¾å¼æˆ–åŒ¿åå‡½æ•°æ˜¯ä¸€ä¸ªâ€œå‡½æ•°å­—é¢é‡ï¼ˆfunction literalï¼‰â€ï¼Œä¹Ÿå°±æ˜¯æœªå£°æ˜çš„å‡½æ•°ï¼Œä½œä¸ºè¡¨è¾¾å¼ç›´æ¥ä¼ é€’ã€‚è€ƒè™‘å¦‚ä¸‹ä¾‹å­ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>max</span><span class=p>(</span><span class=n>strings</span><span class=p>,</span> <span class=p>{</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=o>-&gt;</span> <span class=n>a</span><span class=p>.</span><span class=n>length</span> <span class=p>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>length</span> <span class=p>})</span>
</span></span></code></pre></div><p>å‡½æ•°maxæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªèº«ä¸ºå‡½æ•°çš„ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å­—é¢é‡ã€‚ä½œä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒç­‰ä»·äºï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>compare</span><span class=p>(</span><span class=n>a</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=n>String</span><span class=p>):</span> <span class=n>Boolean</span> <span class=p>=</span> <span class=n>a</span><span class=p>.</span><span class=n>length</span> <span class=p>&lt;</span> <span class=n>b</span><span class=p>.</span><span class=n>length</span>
</span></span></code></pre></div><h3 id=å‡½æ•°ç±»å‹>å‡½æ•°ç±»å‹<a hidden class=anchor aria-hidden=true href=#å‡½æ•°ç±»å‹>#</a></h3><p>ä¸ºäº†è®©ä¸€ä¸ªå‡½æ•°æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¿…é¡»ä¸ºæ¥æ”¶çš„å‚æ•°æŒ‡å®šä¸€ä¸ªå‡½æ•°ç±»å‹ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œmaxçš„å®šä¹‰å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>fun</span> <span class=p>&lt;</span><span class=nc>T</span><span class=p>&gt;</span> <span class=nf>max</span><span class=p>(</span><span class=n>collection</span><span class=p>:</span> <span class=n>Collection</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;,</span> <span class=n>less</span><span class=p>:</span> <span class=p>(</span><span class=n>T</span><span class=p>,</span> <span class=n>T</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Boolean</span><span class=p>):</span> <span class=n>T</span><span class=p>?</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>var</span> <span class=py>max</span><span class=p>:</span> <span class=n>T</span><span class=p>?</span> <span class=p>=</span> <span class=k>null</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=p>(</span><span class=k>it</span> <span class=k>in</span> <span class=n>collection</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>max</span> <span class=o>==</span> <span class=k>null</span> <span class=o>||</span> <span class=n>less</span><span class=p>(</span><span class=n>max</span><span class=p>,</span> <span class=k>it</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=n>max</span> <span class=p>=</span> <span class=k>it</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>max</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>å‚æ•°lessçš„ç±»å‹æ˜¯<code>(T, T) -> Boolean</code>ï¼Œå³ä¸€ä¸ªæ¥æ”¶ä¸¤ä¸ªç±»å‹ä¸ºTçš„å‚æ•°å¹¶è¿”å›ä¸€ä¸ªBooleanå€¼çš„å‡½æ•°ï¼Œå®ƒçš„è¡Œä¸ºæ˜¯å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°å°äºç¬¬äºŒä¸ªå‚æ•°å°±è¿”å›trueã€‚</p><p>å‡½æ•°ç±»å‹ä¸­çš„å‚æ•°å¯ä»¥å‘½åï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>val</span> <span class=py>compare</span><span class=p>:</span> <span class=p>(</span><span class=n>x</span><span class=p>:</span> <span class=n>T</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>T</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Int</span> <span class=p>=</span> <span class=o>..</span><span class=p>.</span>
</span></span></code></pre></div><p>å¦‚æœå£°æ˜äº†ä¸€ä¸ªå¯ä»¥ä¸ºç©ºçš„å‡½æ•°ç±»å‹å˜é‡ï¼Œå°†å‡½æ•°ç±»å‹ç”¨æ‹¬å¼§åŒ…å›´å¹¶åŠ ä¸€ä¸ªé—®å·ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>var</span> <span class=py>sum</span><span class=p>:</span> <span class=p>((</span><span class=n>Int</span><span class=p>,</span> <span class=n>Int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Int</span><span class=p>)?</span> <span class=p>=</span> <span class=k>null</span>
</span></span></code></pre></div><h3 id=lambdaè¡¨è¾¾å¼è¯­æ³•>Lambdaè¡¨è¾¾å¼è¯­æ³•<a hidden class=anchor aria-hidden=true href=#lambdaè¡¨è¾¾å¼è¯­æ³•>#</a></h3><p>Lambdaè¡¨è¾¾å¼çš„å®Œæ•´è¯­æ³•å½¢å¼å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>val</span> <span class=py>sum</span> <span class=p>=</span> <span class=p>{</span> <span class=n>x</span><span class=p>:</span> <span class=n>Int</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>Int</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=p>+</span> <span class=n>y</span> <span class=p>}</span>
</span></span></code></pre></div><p>ä¸€ä¸ªLambdaè¡¨è¾¾å¼æ€»æ˜¯ä½¿ç”¨èŠ±æ‹¬å¼§åŒ…å›´ï¼Œå‚æ•°å£°æ˜åœ¨èŠ±æ‹¬å·ä¸­ï¼Œå¯ä»¥æœ‰å¯é€‰çš„ç±»å‹æ ‡è¯†ï¼Œæ­£æ–‡è·Ÿåœ¨å³ç®­å¤´ç¬¦å·<code>-></code>åã€‚å¦‚æœæ¨æ–­å‡ºlambdaè¿”å›ç±»å‹ä¸æ˜¯Unitï¼Œé‚£ä¹ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼å°±æ˜¯è¿”å›å€¼ã€‚</p><p>å¦‚æœå°†å¯é€‰çš„æ ‡è¯†ç§»åˆ°å¤–é¢ï¼Œå¯ä»¥è¡¨ç¤ºå¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>val</span> <span class=py>sum</span><span class=p>:</span> <span class=p>(</span><span class=n>Int</span><span class=p>,</span> <span class=n>Int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Int</span> <span class=p>=</span> <span class=p>{</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>-&gt;</span> <span class=n>x</span> <span class=p>+</span> <span class=n>y</span> <span class=p>}</span>
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href=https://kotlinlang.org/docs/reference/returns.html#return-at-labels>é™å®šçš„return</a>è¯­æ³•ä»lambdaä¸­æ˜¾å¼åœ°è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦åˆ™ä¼šè¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œä¸‹é¢ä¸¤ç§è¡¨ç¤ºæ˜¯ç­‰ä»·çš„ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>ints</span><span class=p>.</span><span class=n>filter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>shouldFilter</span> <span class=p>=</span> <span class=k>it</span> <span class=p>&gt;</span> <span class=m>0</span> 
</span></span><span class=line><span class=cl>        <span class=n>shouldFilter</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>ints</span><span class=p>.</span><span class=n>filter</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>shouldFilter</span> <span class=p>=</span> <span class=k>it</span> <span class=p>&gt;</span> <span class=m>0</span> 
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=nd>@filter</span> <span class=n>shouldFilter</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><h3 id=åŒ¿åå‡½æ•°>åŒ¿åå‡½æ•°<a hidden class=anchor aria-hidden=true href=#åŒ¿åå‡½æ•°>#</a></h3><p>ä¸Šé¢çš„lambdaè¡¨è¾¾å¼ä¸­ä¸èƒ½æŒ‡å®šå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿›è¡Œè‡ªåŠ¨æ¨æ–­ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³ç‰¹åˆ«æŒ‡å®šï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>fun</span><span class=p>(</span><span class=n>x</span><span class=p>:</span> <span class=n>Int</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>Int</span><span class=p>):</span> <span class=n>Int</span> <span class=p>=</span> <span class=n>x</span> <span class=p>+</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span><span class=p>(</span><span class=n>x</span><span class=p>:</span> <span class=n>Int</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>Int</span><span class=p>):</span> <span class=n>Int</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>x</span> <span class=p>+</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span></code></pre></div><p>å‚æ•°å’Œè¿”å›ç±»å‹çš„æŒ‡å®šå’Œå¸¸è§„å‡½æ•°ä¸€æ ·ï¼Œé™¤äº†ä¸€ç‚¹ä»¥å¤–ï¼Œå³åŒ¿åå‡½æ•°å‚æ•°ç±»å‹å¦‚æœå¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å…¶å¿½ç•¥ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>ints</span><span class=p>.</span><span class=n>filter</span><span class=p>(</span><span class=k>fun</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=p>=</span> <span class=n>item</span> <span class=p>&gt;</span> <span class=m>0</span><span class=p>)</span>
</span></span></code></pre></div><p>åŒ¿åå‡½æ•°å’Œlambdaè¡¨è¾¾å¼çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒä¸èƒ½ä½œä¸ºæ‹¬å¼§å¤–å‚æ•°ä¼ é€’ï¼Œæ­¤å¤–ï¼Œä¸¤è€…çš„<a href=https://kotlinlang.org/docs/reference/inline-functions.html#non-local-returns>éå±€éƒ¨è¿”å›(non-local returns)</a>è¡Œä¸ºä¹Ÿä¸ä¸€æ ·ï¼Œä¸€ä¸ªæ— æ ‡ç­¾çš„returnæ€»æ˜¯ä»funå£°æ˜çš„å‡½æ•°å†…è¿”å›ï¼Œè¿™è¡¨æ˜lambdaè¡¨è¾¾å¼ä¸­çš„returnä¼šä»åŒ…å›´å‡½æ•°è¿”å›ï¼Œè€ŒåŒ¿åå‡½æ•°ä¼šä»è‡ªèº«è¿”å›ã€‚</p><h3 id=é—­åŒ…closures>é—­åŒ…ï¼ˆClosuresï¼‰<a hidden class=anchor aria-hidden=true href=#é—­åŒ…closures>#</a></h3><p>ä¸€ä¸ªlambdaè¡¨è¾¾å¼æˆ–è€…åŒ¿åå‡½æ•°ï¼ˆä»¥åŠå±€éƒ¨å‡½æ•°å’Œå¯¹è±¡è¡¨è¾¾å¼ï¼‰å¯ä»¥è®¿é—®å…¶é—­åŒ…ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤–éƒ¨èŒƒå›´å£°æ˜çš„å˜é‡ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>var</span> <span class=py>sum</span> <span class=p>=</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>    <span class=n>ints</span><span class=p>.</span><span class=n>filter</span> <span class=p>{</span> <span class=k>it</span> <span class=p>&gt;</span> <span class=m>0</span> <span class=p>}.</span><span class=n>forEach</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=o>+=</span> <span class=k>it</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>print</span><span class=p>(</span><span class=n>sum</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡>å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡<a hidden class=anchor aria-hidden=true href=#å¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡>#</a></h3><p>Kotlinå…è®¸ç”¨ä¸€ä¸ªæŒ‡å®šçš„æ¥æ”¶å¯¹è±¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°å­—é¢é‡ã€‚åœ¨å‡½æ•°å­—é¢é‡çš„æ­£æ–‡ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥è°ƒç”¨æ¥æ”¶å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼æ‰©å±•å‡½æ•°ï¼Œå®ƒå…è®¸ä½ åœ¨å‡½æ•°ä½“é‡è®¿é—®æ¥æ”¶å¯¹è±¡çš„æˆå‘˜ã€‚</p><p>è¿™ç§ç±»å‹çš„å‡½æ•°å­—é¢é‡æ˜¯ä¸€ä¸ªå¸¦æ¥æ”¶å™¨çš„å‡½æ•°ç±»å‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=n>sum</span> <span class=p>:</span> <span class=nc>Int</span><span class=p>.(</span><span class=n>other</span><span class=p>:</span> <span class=n>Int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Int</span>
</span></span></code></pre></div><p>å‡½æ•°å­—é¢é‡å¯ä»¥åƒæ¥å—å¯¹è±¡çš„æˆå‘˜ä¸€æ ·è¿›è¡Œè°ƒç”¨ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=m>1.</span><span class=n>sum</span><span class=p>(</span><span class=m>2</span><span class=p>)</span>
</span></span></code></pre></div><p>ä½ ä»¬å‡½æ•°è¯­æ³•å…è®¸ä½ ç›´æ¥æŒ‡å®šä¸€ä¸ªå‡½æ•°å­—é¢é‡çš„æ¥æ”¶å™¨ç±»å‹ã€‚å¦‚æœä½ éœ€è¦å£°æ˜ä¸€ä¸ªå¸¦æ¥æ”¶å™¨çš„å‡½æ•°ç±»å‹å˜é‡ï¼Œè¿™å°±ååˆ†æœ‰ç”¨ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>val</span> <span class=py>sum</span> <span class=p>=</span> <span class=k>fun</span> <span class=nf>Int</span><span class=p>.(</span><span class=n>other</span><span class=p>:</span> <span class=n>Int</span><span class=p>):</span> <span class=n>Int</span> <span class=p>=</span> <span class=k>this</span> <span class=p>+</span> <span class=n>other</span>
</span></span></code></pre></div><p>å¯¹äºä¸€ä¸ªå¸¦æ¥æ”¶å™¨å‡½æ•°ç±»å‹çš„éå­—é¢é‡å€¼ï¼Œåœ¨ä¸€ä¸ªæ¥æ”¶å¸¸è§„å‡½æ•°ä½œä¸ºå‚æ•°çš„åœ°æ–¹å¹¶ä¸”è¯¥å¸¸è§„å‡½æ•°ç±»å‹ç¬¬ä¸€ä¸ªå‚æ•°ä¸è¯¥å€¼çš„æ¥æ”¶å™¨ç±»å‹ä¸€æ ·ï¼Œé‚£ä¹ˆè¯¥å€¼å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œåä¹‹äº¦ç„¶ã€‚ä¾‹å¦‚ï¼Œç±»å‹<code>String.(Int) -> Boolean</code>å’Œ<code>(String, Int) -> Boolean</code>æ˜¯å…¼å®¹çš„ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>val</span> <span class=py>represents</span><span class=p>:</span> <span class=nc>String</span><span class=p>.(</span><span class=n>Int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Boolean</span> <span class=p>=</span> <span class=p>{</span> <span class=n>other</span> <span class=o>-&gt;</span> <span class=n>toIntOrNull</span><span class=p>()</span> <span class=o>==</span> <span class=n>other</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>println</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>.</span><span class=n>represents</span><span class=p>(</span><span class=m>123</span><span class=p>))</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>testOperation</span><span class=p>(</span><span class=n>op</span><span class=p>:</span> <span class=p>(</span><span class=n>String</span><span class=p>,</span> <span class=n>Int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Boolean</span><span class=p>,</span> <span class=n>a</span><span class=p>:</span> <span class=n>String</span><span class=p>,</span> <span class=n>b</span><span class=p>:</span> <span class=n>Int</span><span class=p>,</span> <span class=n>c</span><span class=p>:</span> <span class=n>Boolean</span><span class=p>)</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>        <span class=n>assert</span><span class=p>(</span><span class=n>op</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>)</span> <span class=o>==</span> <span class=n>c</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    <span class=n>testOperation</span><span class=p>(</span><span class=n>represents</span><span class=p>,</span> <span class=s2>&#34;100&#34;</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=k>true</span><span class=p>)</span> <span class=c1>// OK
</span></span></span></code></pre></div><p>å½“æ¥æ”¶å™¨ç±»å‹å¯ä»¥ä»ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºæ—¶ï¼ŒLambdaè¡¨è¾¾å¼å¯ä»¥ç”¨ä½œå¸¦æ¥æ”¶å™¨çš„å‡½æ•°å­—é¢é‡ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-kotlin data-lang=kotlin><span class=line><span class=cl>    <span class=k>class</span> <span class=nc>HTML</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>fun</span> <span class=nf>body</span><span class=p>()</span> <span class=p>{</span> <span class=o>..</span><span class=p>.</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>fun</span> <span class=nf>html</span><span class=p>(</span><span class=k>init</span><span class=p>:</span> <span class=nc>HTML</span><span class=p>.()</span> <span class=o>-&gt;</span> <span class=n>Unit</span><span class=p>):</span> <span class=n>HTML</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>val</span> <span class=py>html</span> <span class=p>=</span> <span class=n>HTML</span><span class=p>()</span>  <span class=c1>// create the receiver object
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>html</span><span class=p>.</span><span class=k>init</span><span class=p>()</span>        <span class=c1>// pass the receiver object to the lambda
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=n>html</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>html</span> <span class=p>{</span>       <span class=c1>// lambda with receiver begins here
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>body</span><span class=p>()</span>   <span class=c1>// calling a method on the receiver object
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span></code></pre></div></div></article></main><footer class=footer><span>&copy; 2024 <a href=https://epicmars.github.io/>AndroidPi</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 8" fill="currentcolor"><path d="M12 8H0l6-8z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>