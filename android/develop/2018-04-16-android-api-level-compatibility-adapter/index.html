<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" >
        <meta lang="zh">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Android平台版本兼容性适配 | androidpi</title>
<meta name="description" content="平台版本 截止于 2018 年 1 月 8 日 Version Codename API Distribution 2.3.3-2.3.7 Gingerbread 10 0.3% 4.0.3-4.0.4 Ice Cream Sandwich 15 0.4% 4.1.x Jelly Bean 16 1.5% 4.2.x Jelly Bean 17 2.2% 4.3 Jelly Bean 18 0.6% 4.4 KitKat 19 10.3% 5.0 Lollipop 21 4.8% 5.1 Lollipop 22 17.6% 6.0 Marshmallow 23 25.5% 7.0 Nougat 24 22.9% 7.1 Nougat 25 8.2% 8.0 Oreo 26 4.9%">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/solid.css" integrity="sha384-TbilV5Lbhlwdyc4RuIV/JhD8NR+BfMrvz4BL5QFa2we1hQu6wvREr3v6XSRfCTRp" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/brands.css" integrity="sha384-7xAnn7Zm3QC1jFjVc1A6v/toepoG3JXboQYzbM0jrPzou9OFXm/fY6Z/XiIebl/k" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/fontawesome.css" integrity="sha384-ozJwkrqb90Oa3ZNb+yKFW2lToAWYdTiF1vt8JiH5ptTGHTGcN7qdoR1F95e0kYyG" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
        
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="/css/article.css" />

    </head>

    <body>
        <div class="site-wrapper">
                <header>
    <nav>
        <a class="home" href="https://www.androidpi.com/">首页</a>
    </nav>
    
</header>
                <div class="site-main">
                    
    <div class="main">
        <div class="article">
            <aside>
                    <nav id="TableOfContents">
  <ul>
    <li><a href="#平台版本httpsdeveloperandroidcomaboutdashboardshlzh-cn"><a href="https://developer.android.com/about/dashboards/?hl=zh-cn">平台版本</a></a></li>
    <li><a href="#api级别httpsdeveloperandroidcomguidetopicsmanifestuses-sdk-element"><a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element">API级别</a></a></li>
    <li><a href="#应用兼容性">应用兼容性</a>
      <ul>
        <li><a href="#应用向前兼容性">应用向前兼容性</a></li>
        <li><a href="#应用向后兼容性">应用向后兼容性</a></li>
      </ul>
    </li>
    <li><a href="#平台版本特性">平台版本特性</a>
      <ul>
        <li><a href="#android-60">Android 6.0</a></li>
        <li><a href="#android-70">Android 7.0</a></li>
      </ul>
    </li>
  </ul>
</nav>
            </aside>
            <article>
                <div class="title">
                    <h1 id="title">Android平台版本兼容性适配</h1>
                </div>
                <div class="content">
                        <h2 id="平台版本httpsdeveloperandroidcomaboutdashboardshlzh-cn"><a href="https://developer.android.com/about/dashboards/?hl=zh-cn">平台版本</a></h2>
<p>截止于 2018 年 1 月 8 日</p>
<table>
<thead>
<tr>
<th>Version</th>
<th>Codename</th>
<th>API</th>
<th>Distribution</th>
</tr>
</thead>
<tbody>
<tr>
<td>2.3.3-2.3.7</td>
<td>Gingerbread</td>
<td>10</td>
<td>0.3%</td>
</tr>
<tr>
<td>4.0.3-4.0.4</td>
<td>Ice Cream Sandwich</td>
<td>15</td>
<td>0.4%</td>
</tr>
<tr>
<td>4.1.x</td>
<td>Jelly Bean</td>
<td>16</td>
<td>1.5%</td>
</tr>
<tr>
<td>4.2.x</td>
<td>Jelly Bean</td>
<td>17</td>
<td>2.2%</td>
</tr>
<tr>
<td>4.3</td>
<td>Jelly Bean</td>
<td>18</td>
<td>0.6%</td>
</tr>
<tr>
<td>4.4</td>
<td>KitKat</td>
<td>19</td>
<td>10.3%</td>
</tr>
<tr>
<td>5.0</td>
<td>Lollipop</td>
<td>21</td>
<td>4.8%</td>
</tr>
<tr>
<td>5.1</td>
<td>Lollipop</td>
<td>22</td>
<td>17.6%</td>
</tr>
<tr>
<td>6.0</td>
<td>Marshmallow</td>
<td>23</td>
<td>25.5%</td>
</tr>
<tr>
<td>7.0</td>
<td>Nougat</td>
<td>24</td>
<td>22.9%</td>
</tr>
<tr>
<td>7.1</td>
<td>Nougat</td>
<td>25</td>
<td>8.2%</td>
</tr>
<tr>
<td>8.0</td>
<td>Oreo</td>
<td>26</td>
<td>4.9%</td>
</tr>
<tr>
<td>8.1</td>
<td>Oreo</td>
<td>27</td>
<td>0.8%</td>
</tr>
</tbody>
</table>
<h2 id="api级别httpsdeveloperandroidcomguidetopicsmanifestuses-sdk-element"><a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element">API级别</a></h2>
<p>API 级别是一个对 Android 平台版本提供的框架 API 修订版进行唯一标识的整数值。</p>
<ul>
<li>
<p>android:minSdkVersion</p>
<p>一个用于指定应用运行所需最低 API 级别的整数。 如果系统的 API 级别低于该属性中指定的值，Android 系统将阻止用户安装应用。 您应该始终声明该属性。</p>
</li>
<li>
<p>android:targetSdkVersion</p>
<p>一个用于指定应用的目标 API 级别的整数。如果未设置，其默认值与为 minSdkVersion 指定的值相等。</p>
<p>该属性用于通知系统，您已针对目标版本进行测试，并且系统不应启用任何兼容性行为来保持您的应用与目标版本的向前兼容性。 应用仍可在较低版本上运行（最低版本为 minSdkVersion）。</p>
<p>在 Android 随着每个新版本的推出而进化的过程中，一些行为甚至是外观可能会发生变化。不过，如果平台的 API 级别高于您的应用的 targetSdkVersion 所声明的版本，系统就可以通过启用兼容性行为来确保您的应用继续以您所期望的方式工作。 您可以通过将 targetSdkVersion 指定为与应用所运行平台的 API 级别一致来停用此类兼容性行为。 例如，如果将该值设置为“11”或更高，系统便可在您的应用运行在 Android 3.0 或更高版本的平台上时对其应用新的默认主题 (Holo)，还可在您的应用运行在更大屏幕上时停用屏幕兼容性模式（因为对 API 级别 11 的支持隐含了对更大屏幕的支持）。</p>
<p>系统可根据您为该属性设置的值启用许多兼容性行为。 Build.VERSION_CODES 参考资料中的相应平台版本对其中的几种行为做了说明。</p>
<p>要让您的应用与各 Android 版本保持同步，您应该增加该属性的值，使其与最新 API 级别一致，然后在相应平台版本上对您的应用进行全面测试。</p>
<p>引入的版本：API 级别 4</p>
</li>
<li>
<p>android:maxSdkVersion</p>
<p>一个指定作为应用设计运行目标的最高 API 级别的整数。
在 Android 1.5、1.6、2.0 及 2.0.1 中，系统会在安装应用以及系统更新后重新验证应用时检查该属性的值。 在任一情况下，如果应用的 maxSdkVersion 属性低于系统本身使用的 API 级别，系统均不允许安装应用。 在系统更新后重新验证这种情况下，这实际上相当于将您的应用从设备中移除。</p>
<p>为说明该属性在系统更新后对您的应用的影响，请看看下面这个示例：</p>
<p>Google Play 上发布了一个在其清单中声明了 maxSdkVersion=&ldquo;5&rdquo; 的应用。 一位设备运行 Android 1.6（API 级别 4）的用户下载并安装了该应用。 几周后，该用户收到了 Android 2.0（API 级别 5）OTA 系统更新。 更新安装后，系统检查该应用的 maxSdkVersion 并顺利完成了对其的重新验证。 应用仍可照常工作。 不过，一段时间后，设备又收到了一个系统更新，这次是更新到 Android 2.0.1（API 级别 6）。 更新完成后，系统无法再重新验证应用，因为此时系统本身的 API 级别 (6) 已超过该应用支持的最高级别 (5)。 系统会使该应用对用户不可见，这实际上相当于将它从设备上删除。</p>
</li>
</ul>
<h2 id="应用兼容性">应用兼容性</h2>
<h3 id="应用向前兼容性">应用向前兼容性</h3>
<p>Android 应用一般向前兼容新版本的 Android 平台。</p>
<p>因为几乎所有对框架 API 的更改都是新增更改，所以使用 API 任何给定版本（其 API 级别所指定版本）开发的 Android 应用均向前兼容更新版本的 Android 平台以及更高 API 级别。 应用应该能够在所有后期版本的 Android 平台上运行，除非在个别情况下应用使用的某个 API 部分后来由于某种原因被移除。</p>
<p>向前兼容性很重要，因为许多 Android 设备都接收 OTA 系统更新。 用户可以安装您的应用并顺利使用，然后通过接收 OTA 更新升级到新版本的 Android 平台。 安装更新后，您的应用将运行在新运行时版本的环境中，但这个版本具有您的应用所依赖的 API 和系统功能。</p>
<p>在某些情况下，在该 API 之下所做的更改（例如对底层系统本身的更改）可能会影响运行在新环境中的应用。 因此，作为应用开发者，您必须了解应用在各系统环境中的外观和行为。 为帮助您在各种版本的 Android 平台上测试您的应用，Android SDK 提供了多个可供您下载的平台。每个平台都包括一个兼容的系统映像，您可以在 AVD 中运行该映像来测试您的应用。</p>
<h3 id="应用向后兼容性">应用向后兼容性</h3>
<p>Android 应用不一定向后兼容比其编译时所针对的目标版本更久远的 Android 平台版本。</p>
<p>每个新版本的 Android 平台都可能包括新的框架 API，例如那些能够让应用使用新的平台功能或者替换现有 API 部分的 API。 应用可以在运行于新平台时使用这些新 API，如上所述，也可以在运行于更新版本的平台（API 级别所指定的平台）上时使用这些新 API。 反之，由于早期版本的平台不包括新 API，因此使用新 API 的应用无法运行在这些平台上。</p>
<p>尽管 Android 设备降级至之前版本平台的情况不太可能发生，但必须意识到，在现实情况下可能有许多设备运行的是早期版本的平台。 即便是在能够获得 OTA 更新的设备中，也可能发生一些设备获得的更新滞后，可能在相当长时间内无法获得更新的情况。</p>
<h2 id="平台版本特性">平台版本特性</h2>
<h3 id="android-60">Android 6.0</h3>
<ul>
<li>运行时权限</li>
</ul>
<p>此版本引入了一种新的权限模式，如今，用户可直接在运行时管理应用权限。这种模式让用户能够更好地了解和控制权限，同时为应用开发者精简了安装和自动更新过程。用户可为所安装的各个应用分别授予或撤销权限。</p>
<p>对于以 Android 6.0（API 级别 23）或更高版本为目标平台的应用，请务必在运行时检查和请求权限。要确定您的应用是否已被授予权限，请调用新增的 checkSelfPermission() 方法。要请求权限，请调用新增的 requestPermissions() 方法。即使您的应用并不以 Android 6.0（API 级别 23）为目标平台，您也应该在新权限模式下测试您的应用。</p>
<p>如需了解有关在您的应用中支持新权限模式的详情，请参阅使用系统权限。如需了解有关如何评估新模式对应用的影响的提示，请参阅权限最佳做法。</p>
<h3 id="android-70">Android 7.0</h3>
<ul>
<li>在应用间共享文件</li>
</ul>
<p>对于面向 Android 7.0 的应用，Android 框架执行的 StrictMode API 政策禁止在您的应用外部公开 file:// URI。如果一项包含文件 URI 的 intent 离开您的应用，则应用出现故障，并出现 FileUriExposedException 异常。</p>
<p>要在应用间共享文件，您应发送一项 content:// URI，并授予 URI 临时访问权限。进行此授权的最简单方式是使用 FileProvider 类。如需了解有关权限和共享文件的详细信息，请参阅共享文件。</p>
<p>参考：</p>
<ul>
<li>
<p><a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element?hl=zh-cn">应用清单：<code>&lt;uses-sdk&gt;</code></a></p>
</li>
<li>
<p><a href="https://developer.android.com/guide/topics/permissions/overview">Permissions Overview</a></p>
</li>
</ul>

                </div>
                
            </article>
        </div>
    </div>

                </div>
                <footer>
    Powered by <a target="_blank" href="https://gohugo.io/">Hugo</a> And 
    <a target="_blank" href="https://pages.github.com/">Github Pages</a>
</footer>
                <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
                

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.3.5/jquery.fancybox.min.js"></script>

                <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.12.0/styles/default.min.css">
                <script src="/js/highlight.pack.js"></script>
                <script src="https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
                <script type="text/javascript" async src="https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [
                ['$', '$'],
                ['\\(', '\\)']
            ],
            displayMath: [
                ['$$', '$$']
            ],
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            TeX: {
                equationNumbers: {
                    autoNumber: "AMS"
                },
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
        }
    });
    MathJax.Hub.Queue(function () {



        var all = MathJax.Hub.getAllJax(),
            i;
        for (i = 0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });

    MathJax.Hub.Config({

        TeX: {
            equationNumbers: {
                autoNumber: "AMS"
            }
        }
    });
</script>
                <script type="text/javascript" src="/js/main.js"></script>
        </div>
    </body>

</html>