<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>
  
     Kotlin类的定义 | 
    风格与布局
  
</title><meta name="description" content="Android移动应用开发"><meta name="author" content="jastrelax">

<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/favicon-32x32.png " sizes="32x32" type="image/png">
<link rel="icon" href="/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#0c344b">
<link rel="icon" href="/favicon.ico">




    
        
            <link rel="stylesheet" href="/dist/main.37ab3f61b95417873748.min.css">
        
    




<link rel="canonical" href="https://www.androidpi.com/dev/kotlin/2017-10-30-kotlin-class-definition/"><meta property="og:title" content="Kotlin类的定义" />
<meta property="og:description" content="数据类（Data Classes） 我们常常创建仅仅持有数据的类，类似Java中的POJO或JavaBean，其对象我们一般称为实体（entit" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.androidpi.com/dev/kotlin/2017-10-30-kotlin-class-definition/" />
<meta property="article:published_time" content="2017-10-30T14:36:02+08:00" />
<meta property="article:modified_time" content="2017-10-30T14:36:02+08:00" />
<meta itemprop="name" content="Kotlin类的定义">
<meta itemprop="description" content="数据类（Data Classes） 我们常常创建仅仅持有数据的类，类似Java中的POJO或JavaBean，其对象我们一般称为实体（entit">
<meta itemprop="datePublished" content="2017-10-30T14:36:02&#43;08:00" />
<meta itemprop="dateModified" content="2017-10-30T14:36:02&#43;08:00" />
<meta itemprop="wordCount" content="1031">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kotlin类的定义"/>
<meta name="twitter:description" content="数据类（Data Classes） 我们常常创建仅仅持有数据的类，类似Java中的POJO或JavaBean，其对象我们一般称为实体（entit"/>

</head>
<body>
    
<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top shadow-sm" id="navbar-main-menu">
    <div class="container">
        <a class="navbar-brand font-weight-bold" href="https://www.androidpi.com/">风格与布局</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="main-menu">
            <ul class="navbar-nav ml-auto">
                
                    <li class="nav-item"><a class="nav-link" href="/android/">Android</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/blockchain/">Blockchain</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/book/">Books</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/cs/">CS</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/ee/">EE</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/java/">Java</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/puzzles/">Puzzles</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/web/">Web</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/backend/">后端</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/engineering/">工程与架构</a></li>
                
                    <li class="nav-item"><a class="nav-link" href="/dev/">开发</a></li>
                
            
            </ul>
        </div>
    </div>
</nav>


    
<main class="content-page container pt-7 pb-5">
    <div class="row">
        <div class="col">
            <article>
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <h2 class="mb-3">Kotlin类的定义</h2>

                        <div class="content">
                            <h2 id="数据类data-classes">数据类（Data Classes）</h2>
<p>我们常常创建仅仅持有数据的类，类似Java中的POJO或JavaBean，其对象我们一般称为实体（entity），因此它对应我们常说的Entity类。在一般UI应用分层架构中，例如MVC，MVP，MVVM等，都含有一个模型（Model）层，实体类型就属于这一块，它是构建业务的基石。</p>
<p>为此Kotlin专门定义了data类型：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">    <span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>(<span style="color:#66d9ef">val</span> name: String, <span style="color:#66d9ef">val</span> age: Int)
</code></pre></div><p>编译器会根据主构造函数中声明的属性自动生成如下成员：</p>
<ul>
<li>equals()/hashCode()对</li>
<li>toString()方法，返回字符串形式为&quot;User(name=John, age=42)&rdquo;</li>
<li>componentN() 方法，其中N对应于属性声明的顺序</li>
<li>copy()函数</li>
</ul>
<p>为了保持生成代码的一致性和行为的有效性，data类必须满足以下要求：</p>
<ul>
<li>主构造器需要至少一个参数</li>
<li>所有主构造器参数需要声明为val或var</li>
<li>Data类型不能是abstruct、open、sealed或inner的</li>
</ul>
<p>此外，对于成员继承，成员生成遵循以下规则：</p>
<ul>
<li>如果一个data类正文中明确实现了equals(),hashCode(),toString()方法，或者超类中有final修饰的实现，那么这些方法便不会生成，直接使用已有的实现。</li>
<li>如果超类有open修饰的componentN()方法并且返回兼容的类型，那么对应的生成方法会重写超类的方法，否则会报错。</li>
<li>显式地实现componentN()和copy()是不允许的</li>
</ul>
<p>在JVM中，如果生成类需要有一个无参构造器，所有属性的默认值必须明确指定。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">    <span style="color:#66d9ef">data</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>(<span style="color:#66d9ef">val</span> name: String = <span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#66d9ef">val</span> age: Int = <span style="color:#ae81ff">0</span>)
</code></pre></div><h3 id="拷贝">拷贝</h3>
<p>copy()方法有什么用？有时我们需要拷贝一个对象，同时改变它的某些属性，并保持其它属性不变，使用copy()方法就可以了，其实现类似这样：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">    <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">copy</span>(name: String = <span style="color:#66d9ef">this</span>.name, age: Int = <span style="color:#66d9ef">this</span>.age) = User(name, age) 
</code></pre></div><p>对象的属性值作为copy的默认参数值，我们可以传递希望改变的值，而保留其它值不变：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">    <span style="color:#66d9ef">val</span> jack = User(name = <span style="color:#e6db74">&#34;Jack&#34;</span>, age = <span style="color:#ae81ff">2</span>)
    <span style="color:#66d9ef">val</span> newJack = jack.copy(name = <span style="color:#e6db74">&#34;New Java&#34;</span>)
</code></pre></div><h3 id="结构声明destructuring-declarations">结构声明（Destructuring Declarations）</h3>
<p>生成的component方法可以使它们使用<a href="https://kotlinlang.org/docs/reference/multi-declarations.html">解构声明</a>中：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">    <span style="color:#66d9ef">val</span> jane = User(<span style="color:#e6db74">&#34;Jane&#34;</span>, <span style="color:#ae81ff">35</span>) 
    <span style="color:#66d9ef">val</span> <span style="color:#960050;background-color:#1e0010">(</span>name, age) = jane
    println(<span style="color:#e6db74">&#34;$name, $age years of age&#34;</span>) <span style="color:#75715e">// prints &#34;Jane, 35 years of age&#34;
</span></code></pre></div><h3 id="标准库data类">标准库Data类</h3>
<p>标准库提供了两个Data类：<code>Pair</code>和<code>Triple</code>。</p>
<h2 id="枚举类型enum-classes">枚举类型（Enum Classes）</h2>
<p>枚举类型最常见的基本使用是实现类型安全的枚举：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">    <span style="color:#66d9ef">enum</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Direction</span> {
        NORTH, SOUTH, WEST, EAST
    }
</code></pre></div><p>每个枚举常量都是一个对象，枚举常量使用逗号分开。</p>
<h3 id="初始化">初始化</h3>
<p>由于每个枚举常量都是一个实例，可以这样初始化：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-kotlin" data-lang="kotlin">    <span style="color:#66d9ef">enum</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Color</span>(<span style="color:#66d9ef">val</span> rgb: Int) {
            RED(<span style="color:#ae81ff">0xFF0000</span>),
            GREEN(<span style="color:#ae81ff">0x00FF00</span>),
            BLUE(<span style="color:#ae81ff">0x0000FF</span>)
    }
</code></pre></div><h2 id="密封类sealed-classes">密封类（Sealed Classes）</h2>

                        </div>
                    </div>
                </div>
            </article>
        </div>
    </div>
</main>


    <footer class="footer text-center bg-dark py-6">
    <div class="container">
        <div class="row">
            <div class="col">
                <ul class="list-inline">
                    
                </ul>

                <p class="text-muted">
                    
                        Copyright &copy; 风格与布局 2020
                    
                </p>

                <p class="text-muted">
                Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with <a href="https://github.com/puresyntax71/hugo-theme-chunky-poster" target="_blank">Chunky Poster</a>.
                </p>

                <p class="text-muted">
                    <a href="http://beian.miit.gov.cn" target="_blank">蜀ICP备18005659号-1</a>
                </p>
            
            </div>
        </div>
    </div>
</footer>

    
    
        
            <script src="/dist/main.d608eadfe5ac0688902e.min.js"></script>
        
    








    
</body>
</html>
